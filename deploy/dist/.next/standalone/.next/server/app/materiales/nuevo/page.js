(()=>{var e={};e.id=522,e.ids=[522],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8819:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15011:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var t=a(60687),o=a(43210),s=a(16189),i=a(28559),n=a(8819),d=a(54794);function l(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)(),a=Number(r.get("configuracionId")),l=r.get("empresaId"),[c,m]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[h,f]=(0,o.useState)(!1),b=()=>{let e=new URLSearchParams;return l&&e.append("empresaId",l),a&&e.append("configuracionId",a.toString()),`/materiales${e.toString()?`?${e.toString()}`:""}`},x=async r=>{if(r.preventDefault(),!c.trim()){p("El nombre del material es requerido");return}if(!a){p("No se pudo obtener el ID de configuraci\xf3n. Por favor, intente nuevamente.");return}try{f(!0);let r={nombre:c.trim(),estado:!0,fecha_creacion:new Date().toISOString().split("T")[0]};await d.V.create(a,r),e.push(b())}catch(e){console.error("Error al guardar el material:",e),p("El nombre del material ya existe. Por favor, utilice otro nombre.")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"p-3 sm:p-4 md:p-6 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[(0,t.jsxs)("a",{href:b(),className:"inline-flex items-center text-[#303e65] hover:text-[#1a2540] transition-colors",children:[(0,t.jsx)(i.A,{className:"mr-1 h-4 w-4"}),(0,t.jsx)("span",{children:"Regresar"})]}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mt-4",children:"Nuevo Material"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Crea un nuevo material para CIDSON."})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,t.jsxs)("form",{onSubmit:x,children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre Del Material",value:c,onChange:e=>{m(e.target.value),e.target.value.trim()&&p("")},className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${u?"ring-2 ring-red-500":""}`}),u&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:u})]})}),(0,t.jsx)("div",{className:"flex justify-end mt-8",children:(0,t.jsx)("button",{type:"submit",disabled:h,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})})]})})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21676:(e,r,a)=>{Promise.resolve().then(a.bind(a,15011))},23826:(e,r,a)=>{"use strict";function t(){return null}a.r(r),a.d(r,{default:()=>t})},26049:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/materiales/nuevo/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/materiales/nuevo/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},54794:(e,r,a)=>{"use strict";a.d(r,{V:()=>o});var t=a(49278);class o{static async getAll(e,r){try{let a=(0,t.e9)(),o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad";if(!a)throw console.error("URL de API no definida"),Error("URL de API no definida");let s=`${a}/api/materiales/${e}`;if(r){let e=new URLSearchParams;r.nombre&&e.append("nombre",r.nombre),void 0!==r.estado&&e.append("estado",r.estado.toString()),r.page&&e.append("page",r.page.toString());let a=e.toString();a&&(s+=`?${a}`)}console.log("Fetching materiales from:",s);let i=await fetch(s,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${o}`}});if(!i.ok){let e=await i.text();throw console.error(`Error HTTP: ${i.status} - ${e}`),Error(`Error HTTP: ${i.status}`)}let n=await i.json();return console.log("API Response:",n),{data:n.data.map(e=>({id:e.id,nombre:e.nombre,estado:e.estado,fecha_creacion:e.fecha_creacion})),meta:n.meta}}catch(e){return console.error("Error al obtener materiales:",e),{data:[],meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}}}}static async create(e,r){try{if(!e)throw Error("configuracionId es requerido");if(!r||!r.nombre)throw Error("El nombre del material es requerido");let a=(0,t.e9)(),o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=`${a}/api/materiales/store/${e}`;console.log("Creando material:",{url:s,material:r});let i={nombre:r.nombre.trim(),estado:"boolean"==typeof r.estado?+!!r.estado:+("Activo"===r.estado)},n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(i)});if(!n.ok){let e=await n.json();throw Error(e.message||`Error al crear material: ${n.statusText}`)}let d=await n.json();if(!d.data)throw Error("La respuesta del servidor no tiene el formato esperado");return{id:d.data.id,nombre:d.data.nombre,estado:d.data.estado,fecha_creacion:d.data.fecha_creacion}}catch(e){throw console.error("Error al crear material:",e),e}}static async update(e,r,a){try{let e=(0,t.e9)(),o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=`${e}/api/materiales/update/${r}`;console.log("Actualizando material:",{url:s,material:a});let i=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({nombre:a.nombre,estado:+("Activo"===a.estado)})});if(!i.ok){let e=await i.json();throw Error(e.message||`Error al actualizar material: ${i.statusText}`)}let n=await i.json();return{id:n.data.id,nombre:n.data.nombre,estado:n.data.estado,fecha_creacion:n.data.fecha_creacion}}catch(e){throw console.error("Error al actualizar material:",e),e}}static async toggleEstado(e,r){try{let e=(0,t.e9)(),a=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=`${e}/api/materiales/destroy/${r}`,s=await fetch(o,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${a}`}});if(!s.ok){let e=await s.json();throw Error(e.message||`Error al cambiar estado del material: ${s.statusText}`)}let i=await s.json();return{id:i.data.id,nombre:i.data.nombre,estado:i.data.estado,fecha_creacion:i.data.fecha_creacion}}catch(e){throw console.error("Error al cambiar estado del material:",e),e}}static async delete(e,r){try{let a=(0,t.e9)(),o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=`${a}/api/materiales/${e}/${r}`,i=await fetch(s,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${o}`}});if(!i.ok){let e=await i.json();throw Error(e.message||`Error al eliminar material: ${i.statusText}`)}return!0}catch(e){return console.error("Error al eliminar material:",e),!1}}}},58124:(e,r,a)=>{Promise.resolve().then(a.bind(a,26049))},62554:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var t=a(65239),o=a(48088),s=a(88170),i=a.n(s),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(r,d);let l={children:["",{children:["materiales",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,26049)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/materiales/nuevo/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(a.bind(a,23826)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/materiales/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,52608)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/materiales/nuevo/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/materiales/nuevo/page",pathname:"/materiales/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[447,323,900],()=>a(62554));module.exports=t})();