(()=>{var e={};e.id=81,e.ids=[81],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3914:(e,r,a)=>{"use strict";a.d(r,{x:()=>o});var t=a(49278);class o{static async getAll(e,r={}){try{if(console.log("=== Iniciando getAll de AreaService ==="),console.log("configuracionId:",e),console.log("filters:",r),!e)return console.log("No se proporcion\xf3 configuracionId, retornando respuesta vac\xeda"),{data:[],links:{first:"",last:"",prev:null,next:null},meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}};let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/${e}`,o=new URLSearchParams;r.nombre&&o.append("nombre",r.nombre),void 0!==r.estado&&o.append("estado",r.estado.toString()),r.page&&o.append("page",r.page.toString());let s=o.toString();s&&(a=`${a}?${s}`),console.log("URL completa de la petici\xf3n:",a);let n=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",n),console.log("Realizando petici\xf3n fetch con headers:",{Accept:"application/json",Authorization:`Bearer ${n}`});let i=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${n}`}});if(console.log("Respuesta recibida:"),console.log("Status:",i.status),console.log("Status Text:",i.statusText),console.log("Headers:",Object.fromEntries(i.headers.entries())),!i.ok){let e=await i.text();console.error("Error en la respuesta. Texto del error:",e);try{let r=JSON.parse(e);if(console.log("Error parseado como JSON:",r),r.message)throw Error(r.message)}catch(e){console.error("No se pudo parsear el error como JSON:",e)}throw Error(`Error al obtener \xe1reas: ${i.status} - ${e}`)}let l=await i.json();return console.log("Datos recibidos de la API:",l),l}catch(e){throw console.error("Error en getAll de AreaService:",e),console.error("Stack trace:",e instanceof Error?e.stack:"No stack trace disponible"),e}}static async getById(e){try{console.log("=== Iniciando getById de AreaService ==="),console.log("ID a buscar:",e);let r=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/show/${e}`;console.log("URL de la petici\xf3n:",r);let a=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",a);let o=await fetch(r,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${a}`}});if(console.log("Respuesta recibida:"),console.log("Status:",o.status),console.log("Status Text:",o.statusText),!o.ok){let e=await o.text();throw console.error("Error en la respuesta:",e),Error(`Error al obtener \xe1rea: ${o.status} - ${e}`)}let s=await o.json();return console.log("Datos recibidos:",s),{id:s.data.id,nombre:s.data.nombre,estado:s.data.estado?"Activa":"Inactiva",fechaCreacion:s.data.fecha_creacion||"N/A",configuracion_id:s.data.configuracion_id}}catch(e){console.error("Error en getById:",e);return}}static async create(e){try{console.log("=== Iniciando create de AreaService ==="),console.log("Datos a enviar:",e);let r=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/store/${e.configuracion_id}`;console.log("URL de la petici\xf3n:",r);let a=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",a);let o=await fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({nombre:e.nombre})});if(console.log("Respuesta recibida:"),console.log("Status:",o.status),console.log("Status Text:",o.statusText),!o.ok){let e=await o.text();console.error("Error en la respuesta:",e);try{let r=JSON.parse(e);if(console.log("Error parseado:",r),r.message){if(r.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(r.message)}}catch(e){console.error("Error al parsear respuesta de error:",e)}throw Error(`Error al crear \xe1rea: ${o.status} - ${e}`)}let s=await o.json();return console.log("Datos recibidos:",s),{id:s.data.id,nombre:s.data.nombre,estado:s.data.estado?"Activa":"Inactiva",fechaCreacion:s.data.fecha_creacion||"N/A",configuracion_id:s.data.configuracion_id}}catch(e){throw console.error("Error en create:",e),e}}static async update(e,r){try{console.log("=== Iniciando update de AreaService ==="),console.log("ID a actualizar:",e),console.log("Datos a enviar:",r);let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/update/${e}`;console.log("URL de la petici\xf3n:",a);let o=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",o);let s=await fetch(a,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({nombre:r.nombre})});if(console.log("Respuesta recibida:"),console.log("Status:",s.status),console.log("Status Text:",s.statusText),!s.ok){let e=await s.text();console.error("Error en la respuesta:",e);try{let r=JSON.parse(e);if(console.log("Error parseado:",r),r.message){if(r.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(r.message)}}catch(e){console.error("Error al parsear respuesta de error:",e)}throw Error(`Error al actualizar \xe1rea: ${s.status} - ${e}`)}let n=await s.json();return console.log("Datos recibidos:",n),{id:n.data.id,nombre:n.data.nombre,estado:n.data.estado?"Activa":"Inactiva",fechaCreacion:n.data.fecha_creacion||"N/A",configuracion_id:n.data.configuracion_id}}catch(e){throw console.error("Error en update:",e),e}}static async toggleEstado(e){try{console.log("=== Iniciando toggleEstado de AreaService ==="),console.log("ID a cambiar estado:",e);let r=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/destroy/${e}`;console.log("URL de la petici\xf3n:",r);let a=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",a);let o=await fetch(r,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${a}`}});if(console.log("Respuesta recibida:"),console.log("Status:",o.status),console.log("Status Text:",o.statusText),!o.ok){let e=await o.text();console.error("Error en la respuesta:",e);try{let r=JSON.parse(e);if(console.log("Error parseado:",r),r.message)throw Error(r.message)}catch(e){console.error("Error al parsear respuesta de error:",e)}throw Error(`Error al cambiar estado del \xe1rea: ${o.status} - ${e}`)}let s=await o.json();return console.log("Datos recibidos:",s),{id:s.data.id,nombre:s.data.nombre,estado:s.data.estado?"Activa":"Inactiva",fechaCreacion:s.data.fecha_creacion||"N/A",configuracion_id:s.data.configuracion_id}}catch(e){throw console.error("Error en toggleEstado:",e),e}}static async delete(e){try{console.log("=== Iniciando delete de AreaService ==="),console.log("ID a eliminar:",e);let r=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.AREAS}/delete/${e}`;console.log("URL de la petici\xf3n:",r);let a=(0,t.c4)()||"26plhaQiSc4m6AA6LFUAIP6tllkA2ZdAXF3c5ov5f7a6f932";console.log("Token a utilizar:",a);let o=await fetch(r,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${a}`}});if(console.log("Respuesta recibida:"),console.log("Status:",o.status),console.log("Status Text:",o.statusText),!o.ok){let e=await o.text();throw console.error("Error en la respuesta:",e),Error(`Error al eliminar \xe1rea: ${o.status} - ${e}`)}return!0}catch(e){return console.error("Error en delete:",e),!1}}}},8819:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15139:(e,r,a)=>{Promise.resolve().then(a.bind(a,37433))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19727:(e,r,a)=>{"use strict";function t(){return null}a.r(r),a.d(r,{default:()=>t})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33324:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=a(65239),o=a(48088),s=a(88170),n=a.n(s),i=a(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(r,l);let c={children:["",{children:["areas",{children:["nueva",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,75254)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/areas/nueva/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,19727)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/areas/nueva/loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,52608)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/areas/nueva/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/areas/nueva/page",pathname:"/areas/nueva",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33873:e=>{"use strict";e.exports=require("path")},37433:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>p});var t=a(60687),o=a(43210),s=a(16189),n=a(28559);let i=(0,a(62688).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var l=a(8819),c=a(85814),d=a.n(c),u=a(3914);function p(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)().get("empresaId"),[a,c]=(0,o.useState)(""),[p,m]=(0,o.useState)(""),[g,h]=(0,o.useState)(!1),f=async t=>{if(t.preventDefault(),!a.trim()){m("El nombre del \xe1rea es requerido");return}try{if(h(!0),r)try{await u.x.create({nombre:a.trim(),configuracion_id:Number(r)}),e.push(`/areas?empresaId=${r}`)}catch(e){console.error("Error espec\xedfico de API:",e),e&&("string"==typeof e&&(e.includes("already been taken")||e.includes("ya existe"))||"object"==typeof e&&e.message&&(e.message.includes("already been taken")||e.message.includes("ya existe")))?m("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre."):m("No se pudo conectar con el servidor. Verifique su conexi\xf3n e intente nuevamente.")}else{let r=new Date,t=String(r.getDate()).padStart(2,"0"),o=String(r.getMonth()+1).padStart(2,"0"),s=r.getFullYear(),n=`${t}/${o}/${s}`;await u.x.create({nombre:a.trim(),estado:"Activa",fechaCreacion:n}),e.push("/areas")}}catch(e){console.error("Error general al crear \xe1rea:",e),m("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre.")}finally{h(!1)}},x=async()=>{try{h(!0);let t=new Date;String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear(),await u.x.create({nombre:a.trim(),configuracion_id:r?Number(r):0}),r?e.push(`/areas?empresaId=${r}`):e.push("/areas")}catch(e){console.error("Error en modo fallback:",e),m("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre.")}finally{h(!1)}};return(0,t.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,t.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,t.jsxs)(d(),{href:r?`/areas?empresaId=${r}`:"/areas",className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Nuevo registro"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Crea y registra nuevas \xe1reas."}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre del \xc1rea",value:a,onChange:e=>{c(e.target.value),e.target.value.trim()&&m("")},className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${p?"ring-2 ring-red-500":""}`,disabled:g}),p&&(0,t.jsxs)("div",{className:"mt-2 flex items-start text-sm text-red-500",children:[(0,t.jsx)(i,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),(0,t.jsx)("p",{children:p})]})]})}),(0,t.jsx)("div",{className:"flex justify-end mt-8",children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})}),p&&p.includes("No se pudo conectar")&&(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("button",{type:"button",onClick:x,className:"text-sm text-blue-600 hover:underline",children:"Continuar en modo local (solo para desarrollo)"})})]})})]})})}},39115:(e,r,a)=>{Promise.resolve().then(a.bind(a,75254))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75254:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/areas/nueva/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/areas/nueva/page.tsx","default")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[447,323,900],()=>a(33324));module.exports=t})();