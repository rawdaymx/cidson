(()=>{var e={};e.id=930,e.ids=[930],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5419:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var t=a(60687),i=a(43210),s=a(16189),o=a(28559),n=a(8819),d=a(85814),c=a.n(d),l=a(98936);function u(){let e=(0,s.useRouter)(),r=(0,s.useParams)(),a=(0,s.useSearchParams)(),d=Number(r.id),u=a.get("empresaId"),p=a.get("configuracionId"),m=a.get("returnTo"),h=a.get("nombre"),f=a.get("estado"),b=a.get("fecha_creacion"),[v,g]=(0,i.useState)({nombre:h||""}),[x,y]=(0,i.useState)({nombre:""}),[w,A]=(0,i.useState)(!1),[E,j]=(0,i.useState)(!1),[S,$]=(0,i.useState)(h?{id:d,nombre:h,estado:"1"===f,fecha_creacion:b}:null),[N,P]=(0,i.useState)(null),B=()=>{let r=new URLSearchParams;if(u&&r.append("empresaId",u),p?r.append("configuracionId",p):S&&S.configuracion_id&&r.append("configuracionId",S.configuracion_id.toString()),m)e.push(m);else{let a=r.toString(),t=`/actividades${a?`?${a}`:""}`;console.log(`Redirigiendo a: ${t}`),e.push(t)}},D=()=>{let e=!0,r={nombre:""};return v.nombre.trim()||(r.nombre="El nombre de la actividad es requerido",e=!1),y(r),e},O=async e=>{if(e.preventDefault(),D())try{j(!0),console.log(`Actualizando actividad con ID ${d}, nombre: ${v.nombre}`);let e=await l.h.update(d,{nombre:v.nombre.trim()});if(e)console.log("Actividad actualizada exitosamente:",e),B();else throw Error("No se pudo actualizar la actividad")}catch(e){console.error("Error al actualizar la actividad:",e),y({nombre:"Ocurri\xf3 un error al actualizar la actividad. Por favor, intente nuevamente."}),j(!1)}};return w?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-[#303e65] border-t-[#f5d433] rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando informaci\xf3n..."})]})}):(0,t.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,t.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,t.jsxs)(c(),{href:(()=>{if(m)return m;let e=new URLSearchParams;u&&e.append("empresaId",u),p&&e.append("configuracionId",p);let r=e.toString();return`/actividades${r?`?${r}`:""}`})(),className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Editar registro"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Crea y registra nuevas actividades."}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,t.jsxs)("form",{onSubmit:O,children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre De La Actividad",value:v.nombre,onChange:e=>{let{name:r,value:a}=e.target;g({...v,[r]:a}),x[r]&&y({...x,[r]:""})},className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${x.nombre?"ring-2 ring-red-500":""}`}),x.nombre&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:x.nombre})]})}),(0,t.jsx)("div",{className:"flex justify-end mt-8",children:(0,t.jsx)("button",{type:"submit",disabled:E,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})})]})})]})})}},7985:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/actividades/editar/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/actividades/editar/[id]/page.tsx","default")},8819:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27462:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c});var t=a(65239),i=a(48088),s=a(88170),o=a.n(s),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(r,d);let c={children:["",{children:["actividades",{children:["editar",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7985)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/actividades/editar/[id]/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,81714)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/actividades/editar/[id]/loading.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,52608)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/actividades/editar/[id]/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/actividades/editar/[id]/page",pathname:"/actividades/editar/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69552:(e,r,a)=>{Promise.resolve().then(a.bind(a,7985))},78335:()=>{},79280:(e,r,a)=>{Promise.resolve().then(a.bind(a,5419))},81714:(e,r,a)=>{"use strict";function t(){return null}a.r(r),a.d(r,{default:()=>t})},96487:()=>{},98936:(e,r,a)=>{"use strict";a.d(r,{h:()=>i});var t=a(49278);class i{static async getAll(e,r={}){try{let a=`${t.nC.BASE_URL}/api/actividades/${e}`,i=new URLSearchParams;r.nombre&&i.append("nombre",r.nombre),void 0!==r.estado&&i.append("estado",r.estado.toString()),r.page&&i.append("page",r.page.toString());let s=i.toString();s&&(a+=`?${s}`);let o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",n=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${o}`}});if(!n.ok){let e=await n.text();try{let r=JSON.parse(e);if(r.message)throw Error(r.message)}catch(e){}throw Error(`Error al obtener actividades: ${n.status} - ${e}`)}return await n.json()}catch(e){throw console.error("Error en ActividadService.getAll:",e),e}}static async getById(e,r){try{let r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch(`${t.nC.BASE_URL}/api/actividades/detalle/${e}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!a.ok){let e=await a.text();try{let r=JSON.parse(e);if(r.message)throw Error(r.message)}catch(e){}throw Error(`Error al obtener actividad: ${a.status} - ${e}`)}return(await a.json()).data}catch(e){throw console.error("Error en ActividadService.getById:",e),e}}static async create(e,r){try{let a=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",i=await fetch(`${t.nC.BASE_URL}/api/actividades/store/${e}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({nombre:r})});if(!i.ok){let e=await i.text();try{let r=JSON.parse(e);if(r.message){if(r.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(r.message)}}catch(e){}throw Error(`Error al crear actividad: ${i.status} - ${e}`)}return(await i.json()).data}catch(e){throw console.error("Error en ActividadService.create:",e),e}}static async update(e,r){try{let a=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",i=await fetch(`${t.nC.BASE_URL}/api/actividades/update/${e}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(r)});if(!i.ok){let e=await i.text();try{let r=JSON.parse(e);if(r.message){if(r.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(r.message)}}catch(e){}throw Error(`Error al actualizar actividad: ${i.status} - ${e}`)}return(await i.json()).data}catch(e){throw console.error("Error en ActividadService.update:",e),e}}static async toggleEstado(e){try{let r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch(`${t.nC.BASE_URL}/api/actividades/destroy/${e}`,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!a.ok){let e=await a.text();try{let r=JSON.parse(e);if(r.message)throw Error(r.message)}catch(e){}throw Error(`Error al cambiar estado de actividad: ${a.status} - ${e}`)}return(await a.json()).data}catch(e){throw console.error("Error en ActividadService.toggleEstado:",e),e}}static async delete(e){try{let r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch(`${t.nC.BASE_URL}/api/actividades/${e}`,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!a.ok){let e=await a.text();try{let r=JSON.parse(e);if(r.message)throw Error(r.message)}catch(e){}throw Error(`Error al eliminar actividad: ${a.status} - ${e}`)}return!0}catch(e){throw console.error("Error en ActividadService.delete:",e),e}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[447,323,900],()=>a(27462));module.exports=t})();