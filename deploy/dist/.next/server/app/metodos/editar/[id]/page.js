(()=>{var e={};e.id=858,e.ids=[858],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8819:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20810:(e,r,t)=>{"use strict";function s(){return null}t.r(r),t.d(r,{default:()=>s})},25409:(e,r,t)=>{"use strict";t.d(r,{Q:()=>o});var s=t(49278);class o{static getHeaders(){let e={"Content-Type":"application/json",Accept:"application/json"},r=(0,s.c4)();return r&&(e.Authorization=`Bearer ${r}`),console.log("Headers de la petici\xf3n:",e),e}static async handleResponse(e){let r;if(!e.ok){let r;let t=e.headers.get("content-type")||"";try{r=await e.text()}catch(r){throw Error(`Error HTTP: ${e.status}, ${e.statusText}`)}if(t.includes("text/html"))throw console.error("Respuesta HTML recibida:",r.substring(0,200)+"..."),Error(`El servidor devolvi\xf3 HTML en lugar de JSON. C\xf3digo: ${e.status}`);try{let t=JSON.parse(r),s=t.message||t.error||`Error HTTP: ${e.status}`;throw Error(s)}catch(t){throw Error(`Error HTTP: ${e.status}, ${r||e.statusText}`)}}if("0"===e.headers.get("content-length"))return{};let t=e.headers.get("content-type")||"";try{r=await e.text()}catch(e){throw Error("Error al leer la respuesta del servidor")}if(!t.includes("application/json")){if(console.warn(`Respuesta no es JSON: ${t}`),r.trim().startsWith("<!DOCTYPE")||r.trim().startsWith("<html"))throw console.error("Respuesta HTML recibida:",r.substring(0,200)+"..."),Error("El servidor devolvi\xf3 HTML en lugar de JSON");try{return JSON.parse(r)}catch(e){throw console.error("No se pudo parsear la respuesta como JSON:",r.substring(0,200)+"..."),Error("Respuesta no v\xe1lida: no es JSON")}}try{return JSON.parse(r)}catch(e){throw console.error("Error al parsear JSON:",e),console.error("Contenido de la respuesta:",r.substring(0,200)+"..."),Error("Error al parsear la respuesta JSON")}}static async get(e){try{let r=this.ensureAbsoluteUrl(e);console.log("GET Request URL:",r);let t=this.getHeaders();console.log("GET Request Headers:",t);let s=await fetch(r,{method:"GET",headers:t});return await this.handleResponse(s)}catch(e){throw console.error("GET Request Error:",e),e}}static async post(e,r){try{let t=this.ensureAbsoluteUrl(e);console.log("POST:",t),console.log("Datos:",r);let s=await fetch(t,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(r)});return await this.handleResponse(s)}catch(r){throw console.error(`Error en solicitud POST a ${e}:`,r),r}}static async put(e,r){try{let t=this.ensureAbsoluteUrl(e);console.log("PUT:",t),console.log("Datos:",r);let s=await fetch(t,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(r)});return await this.handleResponse(s)}catch(r){throw console.error(`Error en solicitud PUT a ${e}:`,r),r}}static async delete(e){try{let r=this.ensureAbsoluteUrl(e);console.log("DELETE:",r);let t=await fetch(r,{method:"DELETE",headers:this.getHeaders()});return await this.handleResponse(t)}catch(r){throw console.error(`Error en solicitud DELETE a ${e}:`,r),r}}static ensureAbsoluteUrl(e){try{return new URL(e),e}catch(s){let r=(process.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev").replace(/\/+$/,""),t=e.replace(/^\/+/,"");return`${r}/${t}`}}static async handleError(e){try{let r=await e.json();if(r.message)return Error(r.message);return Error(`Error HTTP: ${e.status}`)}catch{return Error(`Error HTTP: ${e.status}`)}}}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34587:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(60687),o=t(43210),a=t(16189),n=t(28559),i=t(8819),d=t(85814),c=t.n(d),l=t(64377);function u(){let e=(0,a.useRouter)(),r=(0,a.useParams)(),t=(0,a.useSearchParams)(),d=Number(r.id),u=t.get("empresaId");t.get("data");let[p,m]=(0,o.useState)({nombre:"",descripcion:""}),[h,b]=(0,o.useState)({nombre:"",descripcion:""}),[x,g]=(0,o.useState)(!0),[f,v]=(0,o.useState)(!1),y=e=>{let{name:r,value:t}=e.target;m({...p,[r]:t}),h[r]&&b({...h,[r]:""})},E=()=>{let e=!0,r={nombre:"",descripcion:""};return p.nombre.trim()||(r.nombre="El nombre del m\xe9todo es requerido",e=!1),p.descripcion.trim()||(r.descripcion="La descripci\xf3n del m\xe9todo es requerida",e=!1),b(r),e},w=async r=>{if(r.preventDefault(),E())try{v(!0),await l.W.update(d,{nombre:p.nombre.trim(),descripcion:p.descripcion.trim()}),e.push(`/metodos${u?`?empresaId=${u}`:""}`)}catch(e){console.error("Error al actualizar el m\xe9todo:",e),e?.message?.includes("The nombre has already been taken")?b({...h,nombre:"El nombre del m\xe9todo ya existe. Por favor, utilice otro nombre."}):b({...h,descripcion:"Ocurri\xf3 un error al actualizar el m\xe9todo. Por favor, intente nuevamente."})}finally{v(!1)}};return x?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-[#303e65] border-t-[#f5d433] rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando informaci\xf3n..."})]})}):(0,s.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,s.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,s.jsxs)(c(),{href:`/metodos${u?`?empresaId=${u}`:""}`,className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Editar registro"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Edita el m\xe9todo seleccionado."}),(0,s.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre Del M\xe9todo",value:p.nombre,onChange:y,className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${h.nombre?"ring-2 ring-red-500":""}`}),h.nombre&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.nombre})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",id:"descripcion",name:"descripcion",placeholder:"Descripci\xf3n Del M\xe9todo",value:p.descripcion,onChange:y,className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${h.descripcion?"ring-2 ring-red-500":""}`}),h.descripcion&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.descripcion})]})]}),(0,s.jsx)("div",{className:"flex justify-end mt-8",children:(0,s.jsx)("button",{type:"submit",disabled:f,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})})]})})]})})}},42392:(e,r,t)=>{Promise.resolve().then(t.bind(t,88281))},52120:(e,r,t)=>{Promise.resolve().then(t.bind(t,34587))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64377:(e,r,t)=>{"use strict";t.d(r,{W:()=>o});var s=t(25409);class o{static async getAll(e,r=1,t,o){try{if(!e)return{data:[],links:{first:"",last:"",prev:null,next:null},meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}};let a=`/api/metodos/${e}?page=${r}`;t&&(a+=`&nombre=${encodeURIComponent(t)}`),void 0!==o&&(a+=`&estado=${o}`),console.log(`Obteniendo m\xe9todos: ${a}`);let n=await s.Q.get(a);return n.data||(console.warn("La respuesta no contiene datos",n),n.data=[]),n}catch(e){throw console.error("Error al obtener m\xe9todos:",e),e}}static async getById(e){try{return(await s.Q.get(`/api/metodos/${e}`)).data}catch(r){console.error(`Error al obtener m\xe9todo con id ${e}:`,r);return}}static async create(e,r){try{return console.log(`Creando m\xe9todo para empresa ${e}:`,r),(await s.Q.post(`/api/metodos/store/${e}`,r)).data}catch(e){throw console.error("Error al crear m\xe9todo:",e),e}}static async update(e,r){try{return(await s.Q.put(`/api/metodos/update/${e}`,{nombre:r.nombre,descripcion:r.descripcion})).data}catch(r){if(console.error(`Error al actualizar m\xe9todo con id ${e}:`,r),r.response?.data?.message)throw Error(r.response.data.message);throw r}}static async toggleEstado(e){try{console.log(`Cambiando estado del m\xe9todo con id ${e}`);let r=await s.Q.delete(`/api/metodos/destroy/${e}`);return console.log("Respuesta de toggleEstado:",r),r.data}catch(r){throw console.error(`Error al cambiar estado del m\xe9todo con id ${e}:`,r),r}}static async delete(e){try{return await s.Q.delete(`/api/metodo/${e}`),!0}catch(r){return console.error(`Error al eliminar m\xe9todo con id ${e}:`,r),!1}}}},78335:()=>{},88281:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/metodos/editar/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/metodos/editar/[id]/page.tsx","default")},88494:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c});var s=t(65239),o=t(48088),a=t(88170),n=t.n(a),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let c={children:["",{children:["metodos",{children:["editar",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,88281)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/metodos/editar/[id]/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,20810)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/metodos/editar/[id]/loading.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,52608)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/metodos/editar/[id]/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/metodos/editar/[id]/page",pathname:"/metodos/editar/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,323,900],()=>t(88494));module.exports=s})();