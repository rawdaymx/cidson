(()=>{var e={};e.id=269,e.ids=[269],e.modules={204:(e,a,r)=>{"use strict";r.d(a,{z:()=>o});var t=r(49278);class o{static async getAll(e){try{let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.EMPRESAS}`;if(e){let r=new URLSearchParams;e.nombre&&r.append("nombre",e.nombre),void 0!==e.estado&&r.append("estado",e.estado.toString()),e.fecha_inicio&&r.append("fecha_inicio",e.fecha_inicio),e.fecha_fin&&r.append("fecha_fin",e.fecha_fin),e.page&&r.append("page",e.page.toString());let t=r.toString();t&&(a+=`?${t}`)}let r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!o.ok)throw Error(`Error al obtener empresas: ${o.statusText}`);let n=await o.json();return console.log("Respuesta de la API (getAll):",n),{empresas:n.data.map(e=>({id:e.id,nombre:e.nombre,razonSocial:e.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:e.fecha_creacion,estado:e.estado?"Activo":"Inactivo",configuracion_id:e.configuracion_id})),pagination:n.meta}}catch(e){return console.error("Error al obtener empresas:",e),{empresas:[],pagination:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}}}}static async create(e){try{let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.EMPRESAS}`,r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o={nombre:e.nombre,razon_social:e.razon_social},n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(o)});if(!n.ok){let e=await n.json();throw Error(e.message||`Error al crear empresa: ${n.statusText}`)}let s=await n.json();return console.log("Respuesta de la API (create):",s),{id:s.data.id,nombre:s.data.nombre,razonSocial:s.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:s.data.fecha_creacion,estado:s.data.estado?"Activo":"Inactivo",configuracion_id:s.data.configuracion_id}}catch(e){throw console.error("Error al crear empresa:",e),e}}static async getById(e){try{let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.EMPRESAS}/${e}`,r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!o.ok){if(404===o.status)return;throw Error(`Error al obtener empresa: ${o.statusText}`)}let n=await o.json();return console.log("Respuesta de la API (getById):",n),{id:n.data.id,nombre:n.data.nombre,razonSocial:n.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:n.data.fecha_creacion,estado:n.data.estado?"Activo":"Inactivo",configuracion_id:n.data.configuracion_id}}catch(e){console.error("Error al obtener empresa por ID:",e);return}}static async update(e,a){try{let r=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.EMPRESAS}/${e}`,o=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",n={nombre:a.nombre,razon_social:a.razon_social},s=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(n)});if(!s.ok){if(404===s.status)return;let e=await s.json();if(422===s.status&&e.errors){let a=Error(e.message||"Error de validaci\xf3n");throw a.validationErrors=e.errors,a}throw Error(e.message||`Error al actualizar empresa: ${s.statusText}`)}let i=await s.json();return console.log("Respuesta de la API (update):",i),{id:i.data.id,nombre:i.data.nombre,razonSocial:i.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:i.data.fecha_creacion,estado:i.data.estado?"Activo":"Inactivo",configuracion_id:i.data.configuracion_id}}catch(e){throw console.error("Error al actualizar empresa:",e),e}}static async toggleActive(e){try{let a=`${t.nC.BASE_URL}${t.nC.ENDPOINTS.EMPRESAS}/${e}`,r=(0,t.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(!o.ok){if(404===o.status)return;throw Error(`Error al cambiar estado de empresa: ${o.statusText}`)}let n=await o.json();return console.log("Respuesta de la API (toggleActive):",n),{id:n.data.id,nombre:n.data.nombre,razonSocial:n.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:n.data.fecha_creacion,estado:n.data.estado?"Activo":"Inactivo",configuracion_id:n.data.configuracion_id}}catch(e){throw console.error("Error al cambiar estado de empresa:",e),e}}}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6487:(e,a,r)=>{Promise.resolve().then(r.bind(r,9850))},8819:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9850:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/empresas/nueva/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/empresas/nueva/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21500:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>s.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>u,tree:()=>d});var t=r(65239),o=r(48088),n=r(88170),s=r.n(n),i=r(30893),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(a,c);let d={children:["",{children:["empresas",{children:["nueva",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9850)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/empresas/nueva/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,52608)),"/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/franciscojavierbarrerascebreros/Documents/MediaAerea/cidson/app/empresas/nueva/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/empresas/nueva/page",pathname:"/empresas/nueva",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29956:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var t=r(60687),o=r(43210),n=r(16189),s=r(28559),i=r(8819),c=r(85814),d=r.n(c),l=r(204);function p(){let e=(0,n.useRouter)(),[a,r]=(0,o.useState)(!1),[c,p]=(0,o.useState)(null),u=new Date().toISOString().split("T")[0],[m,f]=(0,o.useState)({nombre:"",razonSocial:"",fechaRegistro:u}),[h,b]=(0,o.useState)({nombre:"",razonSocial:""}),g=()=>{let e=!0,a={nombre:"",razonSocial:""};return m.nombre.trim()||(a.nombre="El nombre de la empresa es requerido",e=!1),m.razonSocial.trim()||(a.razonSocial="La raz\xf3n social es requerida",e=!1),b(a),e},x=e=>{let{name:a,value:r}=e.target;f({...m,[a]:r}),h[a]&&b({...h,[a]:""})},v=async a=>{if(a.preventDefault(),g()){r(!0),p(null);try{let a={nombre:m.nombre,razon_social:m.razonSocial};await l.z.create(a),e.push("/empresas")}catch(e){console.error("Error al guardar la empresa:",e),p(e instanceof Error?e.message:"Error al guardar la empresa. Por favor, intente nuevamente.")}finally{r(!1)}}};return(0,t.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,t.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,t.jsxs)(d(),{href:"/empresas",className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,t.jsx)(s.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Nuevo registro"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Crea y registra una nueva empresa."}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre De La Empresa",value:m.nombre,onChange:x,className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${h.nombre?"ring-2 ring-red-500":""}`,disabled:a}),h.nombre&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.nombre})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"razonSocial",name:"razonSocial",placeholder:"Raz\xf3n Social",value:m.razonSocial,onChange:x,className:`w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ${h.razonSocial?"ring-2 ring-red-500":""}`,disabled:a}),h.razonSocial&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.razonSocial})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Fecha De Registro"}),(0,t.jsx)("div",{className:"w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 flex items-center text-gray-700",children:new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),c&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:c})]}),(0,t.jsx)("div",{className:"flex justify-end mt-8",children:(0,t.jsxs)("button",{type:"submit",className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",disabled:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 mr-2"}),a?"Guardando...":"Guardar"]})})]})})]})})}},33873:e=>{"use strict";e.exports=require("path")},34511:(e,a,r)=>{Promise.resolve().then(r.bind(r,29956))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[447,323,900],()=>r(21500));module.exports=t})();