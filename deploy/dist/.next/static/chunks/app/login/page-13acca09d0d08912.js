(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{924:(e,r,t)=>{"use strict";t.d(r,{c4:()=>o,e9:()=>s,nC:()=>i});var n=t(9509);let a=()=>"https://cidson.api.production.com",s=()=>a().replace(/\/$/,"");function o(){{let e=localStorage.getItem("auth_token");if(e)return e;let r=sessionStorage.getItem("auth_token");if(r)return r}return null}let i={BASE_URL:n.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},2085:(e,r,t)=>{"use strict";t.d(r,{F:()=>o});var n=t(2596);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.$,o=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:o,defaultVariants:i}=r,l=Object.keys(o).map(e=>{let r=null==t?void 0:t[e],n=null==i?void 0:i[e];if(null===r)return null;let s=a(r)||a(n);return o[e][s]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return s(e,l,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...c}[r]):({...i,...c})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},2714:(e,r,t)=>{"use strict";t.d(r,{J:()=>c});var n=t(5155),a=t(2115),s=t(2797),o=t(2085),i=t(3999);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.b,{ref:r,className:(0,i.cn)(l(),t),...a})});c.displayName=s.b.displayName},2797:(e,r,t)=>{"use strict";t.d(r,{b:()=>l});var n=t(2115);t(7650);var a=t(6634),s=t(5155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,a.TL)(`Primitive.${r}`),o=n.forwardRef((e,n)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?t:r,{...o,ref:n})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{}),i=n.forwardRef((e,r)=>(0,s.jsx)(o.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var l=i},3999:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var n=t(2596),a=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,n.$)(r))}},5139:(e,r,t)=>{"use strict";t.d(r,{u:()=>s});var n=t(924),a=t(9971);class s{static async login(e,r){try{let t="".concat(n.nC.BASE_URL).concat(n.nC.ENDPOINTS.LOGIN);console.log("Intentando login en: ".concat(t));let s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer 123"},body:JSON.stringify({email:e,password:r})},o=await fetch(t,s);if(console.log("Respuesta del servidor: ".concat(o.status," ").concat(o.statusText)),!o.ok){if(401===o.status)return{token:"",success:!1,error:"Credenciales incorrectas. Por favor, verifica tu correo y contrase\xf1a."};if(429===o.status)return{token:"",success:!1,error:"Demasiados intentos fallidos. Por favor, intenta de nuevo m\xe1s tarde."};if(404===o.status)return{token:"",success:!1,error:"No se pudo conectar con el servidor de autenticaci\xf3n (".concat(t,"). Por favor, contacta al administrador.")};else return{token:"",success:!1,error:"Error al iniciar sesi\xf3n (".concat(o.status,"). Por favor, intenta de nuevo m\xe1s tarde.")}}let i=await o.text();return(0,a.setCookie)("auth_token",i,{maxAge:2592e3,path:"/",secure:!0,sameSite:"strict"}),localStorage.setItem("auth_token",i),{token:i,success:!0}}catch(e){return console.error("Error en el servicio de autenticaci\xf3n:",e),{token:"",success:!1,error:"Error de conexi\xf3n con el servidor. Por favor, verifica tu conexi\xf3n a internet."}}}static isAuthenticated(){return!!this.getToken()}static getToken(){{let e=localStorage.getItem("auth_token");if(e)return e}let e=(0,a.getCookie)("auth_token");return(null==e?void 0:e.toString())||""}static logout(){localStorage.removeItem("auth_token"),(0,a.deleteCookie)("auth_token",{path:"/"})}}},6634:(e,r,t)=>{"use strict";t.d(r,{Slot:()=>i,TL:()=>o});var n=t(2115);function a(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var s=t(5155);function o(e){let r=function(e){let r=n.forwardRef((e,r)=>{var t,s,o;let i,l;let{children:c,...d}=e,u=function(...e){return n.useCallback(function(...e){return r=>{let t=!1,n=e.map(e=>{let n=a(e,r);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let r=0;r<n.length;r++){let t=n[r];"function"==typeof t?t():a(e[r],null)}}}}(...e),e)}(n.isValidElement(c)?(l=(i=null===(s=Object.getOwnPropertyDescriptor((t=c).props,"ref"))||void 0===s?void 0:s.get)&&"isReactWarning"in i&&i.isReactWarning)?t.ref:(l=(i=null===(o=Object.getOwnPropertyDescriptor(t,"ref"))||void 0===o?void 0:o.get)&&"isReactWarning"in i&&i.isReactWarning)?t.props.ref:t.props.ref||t.ref:void 0,r);if(n.isValidElement(c)){let e=function(e,r){let t={...r};for(let n in r){let a=e[n],s=r[n];/^on[A-Z]/.test(n)?a&&s?t[n]=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let n=s(...r);return a(...r),n}:a&&(t[n]=a):"style"===n?t[n]={...a,...s}:"className"===n&&(t[n]=[a,s].filter(Boolean).join(" "))}return{...e,...t}}(d,c.props);return c.type!==n.Fragment&&(e.ref=u),n.cloneElement(c,e)}return n.Children.count(c)>1?n.Children.only(null):null});return r.displayName="".concat(e,".SlotClone"),r}(e),t=n.forwardRef((e,t)=>{let{children:a,...o}=e,i=n.Children.toArray(a),l=i.find(c);if(l){let e=l.props.children,a=i.map(r=>r!==l?r:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(r,{...o,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,s.jsx)(r,{...o,ref:t,children:a})});return t.displayName="".concat(e,".Slot"),t}var i=o("Slot"),l=Symbol("radix.slottable");function c(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},7168:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var n=t(5155),a=t(2115),s=t(6634),o=t(2085),i=t(3999);let l=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:c=!1,...d}=e,u=c?s.Slot:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:t})),ref:r,...d})});c.displayName="Button"},8007:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var n=t(5155),a=t(2115),s=t(6766),o=t(7168),i=t(9852),l=t(2714),c=t(6874),d=t.n(c),u=t(5139),f=t(5695);function p(){let[e,r]=(0,a.useState)(""),[t,c]=(0,a.useState)(""),[p,m]=(0,a.useState)(!1),[v,g]=(0,a.useState)(""),h=(0,f.useRouter)(),b=(0,f.useSearchParams)().get("callbackUrl")||"/empresas";(0,a.useEffect)(()=>{u.u.isAuthenticated()&&h.push("/empresas")},[h]);let y=async r=>{r.preventDefault(),m(!0),g("");try{if(!e.trim()){g("Por favor, ingresa tu correo electr\xf3nico."),m(!1);return}if(!t){g("Por favor, ingresa tu contrase\xf1a."),m(!1);return}(await u.u.login(e,t)).success?h.push(b):g("Credenciales inv\xe1lidas. Por favor, verifica tu correo y contrase\xf1a.")}catch(e){console.error("Error durante el inicio de sesi\xf3n:",e),g("Credenciales inv\xe1lidas. Por favor, verifica tu correo y contrase\xf1a.")}finally{m(!1)}};return(0,n.jsxs)("div",{className:"flex h-screen",children:[(0,n.jsx)("div",{className:"w-full lg:w-1/2 flex flex-col justify-center items-center p-8 lg:p-16",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsx)("div",{className:"flex flex-col items-center",children:(0,n.jsx)(s.default,{src:"/images/logo.png",alt:"CIDSON Logo",width:300,height:100,priority:!0,className:"mb-8"})}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"Iniciar sesi\xf3n"}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:y,children:[v&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:v}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.J,{htmlFor:"email",className:"sr-only",children:"Correo"}),(0,n.jsx)(i.p,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Correo",className:"bg-gray-50 border-gray-200",value:e,onChange:e=>r(e.target.value),disabled:p})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(d(),{href:"/recuperar-contrasena",className:"text-sm text-[#2D4876] hover:underline",children:"\xbfOlvidaste tu contrase\xf1a?"})}),(0,n.jsx)(l.J,{htmlFor:"password",className:"sr-only",children:"Contrase\xf1a"}),(0,n.jsx)(i.p,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"Contrase\xf1a",className:"bg-gray-50 border-gray-200 mt-1",value:t,onChange:e=>c(e.target.value),disabled:p})]})]}),(0,n.jsx)(o.$,{type:"submit",className:"w-full py-6 bg-[#FFCB05] hover:bg-[#e6b700] text-black font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FFCB05]",disabled:p,children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mr-2",children:"Iniciando sesi\xf3n"}),(0,n.jsx)("div",{className:"h-4 w-4 rounded-full border-2 border-black border-t-transparent animate-spin"})]}):"Iniciar sesi\xf3n"})]})]})}),(0,n.jsx)("div",{className:"hidden lg:block lg:w-1/2 relative",children:(0,n.jsx)(s.default,{src:"/images/background.jpeg",alt:"CIDSON Background",fill:!0,style:{objectFit:"cover"},priority:!0})})]})}},8928:(e,r,t)=>{Promise.resolve().then(t.bind(t,8007))},9852:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var n=t(5155),a=t(2115),s=t(3999);let o=a.forwardRef((e,r)=>{let{className:t,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});o.displayName="Input"}},e=>{var r=r=>e(e.s=r);e.O(0,[6874,4277,6709,6766,8441,1684,7358],()=>r(8928)),_N_E=e.O()}]);