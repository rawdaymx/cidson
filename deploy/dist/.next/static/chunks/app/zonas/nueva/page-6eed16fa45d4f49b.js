(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9296],{924:(e,a,t)=>{"use strict";t.d(a,{c4:()=>c,e9:()=>n,nC:()=>s});var r=t(9509);let o=()=>"https://cidson.api.production.com",n=()=>o().replace(/\/$/,"");function c(){{let e=localStorage.getItem("auth_token");if(e)return e;let a=sessionStorage.getItem("auth_token");if(a)return a}return null}let s={BASE_URL:r.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},1247:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(5155),o=t(2115),n=t(5695),c=t(7550),s=t(4229),i=t(1531);function d(){let e=(0,n.useRouter)(),a=(0,n.useSearchParams)(),t=a.get("configuracionId"),d=a.get("returnTo"),[l,u]=(0,o.useState)(""),[m,h]=(0,o.useState)(""),[p,f]=(0,o.useState)(!1),[g,b]=(0,o.useState)(t?Number(t):null);(0,o.useEffect)(()=>{g||h("No se proporcion\xf3 ID de configuraci\xf3n")},[g]);let E=async a=>{a.preventDefault(),f(!0);try{if(!l.trim()){h("El nombre de la zona es requerido");return}if(!g){h("No se proporcion\xf3 ID de configuraci\xf3n");return}let a={nombre:l.trim(),estado:!0,configuracion_id:g};if(await i.i.create(a),d)e.push(d);else{let a=new URLSearchParams;g&&a.set("configuracionId",g.toString());let t=a.toString()?"/zonas?".concat(a.toString()):"/zonas";e.push(t)}}catch(e){console.error("Error al crear zona:",e),e instanceof Error?"NOMBRE_DUPLICADO"===e.message?h("El nombre de la zona ya existe. Por favor, utilice otro nombre."):h(e.message||"Error al crear la zona. Por favor, intente nuevamente."):h("Error al crear la zona. Por favor, intente nuevamente.")}finally{f(!1)}};return(0,r.jsxs)("div",{className:"p-3 sm:p-4 md:p-6 max-w-[1600px] mx-auto",children:[(0,r.jsxs)("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[(0,r.jsxs)("a",{href:(()=>{let e=new URLSearchParams;return g&&e.append("configuracionId",g.toString()),d&&e.append("returnTo",d),"/zonas".concat(e.toString()?"?".concat(e.toString()):"")})(),className:"inline-flex items-center text-[#303e65] hover:text-[#1a2540] transition-colors",children:[(0,r.jsx)(c.A,{className:"mr-1 h-4 w-4"}),(0,r.jsx)("span",{children:"Regresar"})]}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mt-4",children:"Nueva Zona"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Crea una nueva zona para CIDSON."}),g&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Configuraci\xf3n ID: ",g]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,r.jsxs)("form",{onSubmit:E,children:[(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre De La Zona",value:l,onChange:e=>{u(e.target.value),e.target.value.trim()&&h("")},className:"w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ".concat(m?"ring-2 ring-red-500":"")}),m&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m})]})}),(0,r.jsx)("div",{className:"flex justify-end mt-8",children:(0,r.jsx)("button",{type:"submit",disabled:p||!g,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})})]})})]})}},1531:(e,a,t)=>{"use strict";t.d(a,{i:()=>o});var r=t(924);class o{static async getAll(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return{data:[],links:{first:"",last:"",prev:null,next:null},meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}};let t="".concat(r.nC.BASE_URL,"/api/zonas/").concat(e),o=new URLSearchParams;a.nombre&&o.append("nombre",a.nombre),void 0!==a.estado&&o.append("estado",a.estado.toString()),a.page&&o.append("page",a.page.toString());let n=o.toString();n&&(t="".concat(t,"?").concat(n));let c=(0,r.c4)(),s=await fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)}});if(!s.ok){let e=await s.text();try{let a=JSON.parse(e);if(a.message)throw Error(a.message)}catch(e){console.error("No se pudo parsear el error como JSON:",e)}throw Error("Error al obtener zonas: ".concat(s.status," - ").concat(e))}return await s.json()}catch(e){throw console.error("Error en getAll de ZonaService:",e),e}}static async getById(e){try{let a="".concat(r.nC.BASE_URL,"/api/zonas/show/").concat(e),t=(0,r.c4)(),o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!o.ok)throw Error("Error al obtener la zona: ".concat(o.status));let n=await o.json();return{id:Number(n.data.id),nombre:n.data.nombre,estado:!!n.data.estado,fecha_creacion:n.data.fecha_creacion,configuracion_id:Number(n.data.configuracion_id)}}catch(e){throw console.error("Error al obtener zona:",e),e}}static async create(e){try{let a="".concat(r.nC.BASE_URL,"/api/zonas/store/").concat(e.configuracion_id),t=(0,r.c4)(),o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({nombre:e.nombre})});if(!o.ok){let e=await o.json();if("NOMBRE_DUPLICADO"===e.message)throw Error("NOMBRE_DUPLICADO");throw Error("Error al crear la zona: ".concat(o.status))}let n=await o.json();return{id:Number(n.data.id),nombre:n.data.nombre,estado:!!n.data.estado,fecha_creacion:n.data.fecha_creacion,configuracion_id:Number(n.data.configuracion_id)}}catch(e){throw console.error("Error al crear zona:",e),e}}static async update(e,a){try{let t="".concat(r.nC.BASE_URL,"/api/zonas/update/").concat(e),o=(0,r.c4)(),n=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({nombre:a.nombre,estado:a.estado,configuracion_id:a.configuracion_id})});if(!n.ok){let e=await n.json();if("NOMBRE_DUPLICADO"===e.message)throw Error("NOMBRE_DUPLICADO");throw Error("Error al actualizar la zona: ".concat(n.status))}let c=await n.json();return{id:Number(c.data.id),nombre:c.data.nombre,estado:!!c.data.estado,fecha_creacion:c.data.fecha_creacion,configuracion_id:Number(c.data.configuracion_id)}}catch(e){throw console.error("Error al actualizar zona:",e),e}}static async toggleEstado(e){try{let a="".concat(r.nC.BASE_URL,"/api/zonas/destroy/").concat(e),t=(0,r.c4)(),o=await fetch(a,{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!o.ok)throw Error("Error al cambiar estado de la zona: ".concat(o.status));let n=await o.json();return{id:Number(n.data.id),nombre:n.data.nombre,estado:!!n.data.estado,fecha_creacion:n.data.fecha_creacion,configuracion_id:Number(n.data.configuracion_id)}}catch(e){throw console.error("Error al cambiar estado de la zona:",e),e}}}},4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},7550:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8178:(e,a,t)=>{Promise.resolve().then(t.bind(t,1247))},9946:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(2115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:l,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:a,...c,width:o,height:o,stroke:t,strokeWidth:i?24*Number(s)/Number(o):s,className:n("lucide",d),...m},[...u.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(l)?l:[l]])}),i=(e,a)=>{let t=(0,r.forwardRef)((t,c)=>{let{className:i,...d}=t;return(0,r.createElement)(s,{ref:c,iconNode:a,className:n("lucide-".concat(o(e)),i),...d})});return t.displayName="".concat(e),t}}},e=>{var a=a=>e(e.s=a);e.O(0,[8441,1684,7358],()=>a(8178)),_N_E=e.O()}]);