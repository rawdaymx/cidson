(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1906],{924:(e,a,t)=>{"use strict";t.d(a,{c4:()=>c,e9:()=>o,nC:()=>n});var r=t(9509);let s=()=>"https://cidson.api.production.com",o=()=>s().replace(/\/$/,"");function c(){{let e=localStorage.getItem("auth_token");if(e)return e;let a=sessionStorage.getItem("auth_token");if(a)return a}return null}let n={BASE_URL:r.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},1228:(e,a,t)=>{"use strict";t.d(a,{h:()=>s});var r=t(924);class s{static async getAll(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t="".concat(r.nC.BASE_URL,"/api/actividades/").concat(e),s=new URLSearchParams;a.nombre&&s.append("nombre",a.nombre),void 0!==a.estado&&s.append("estado",a.estado.toString()),a.page&&s.append("page",a.page.toString());let o=s.toString();o&&(t+="?".concat(o));let c=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",n=await fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)}});if(!n.ok){let e=await n.text();try{let a=JSON.parse(e);if(a.message)throw Error(a.message)}catch(e){}throw Error("Error al obtener actividades: ".concat(n.status," - ").concat(e))}return await n.json()}catch(e){throw console.error("Error en ActividadService.getAll:",e),e}}static async getById(e,a){try{let a=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",t=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/detalle/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}});if(!t.ok){let e=await t.text();try{let a=JSON.parse(e);if(a.message)throw Error(a.message)}catch(e){}throw Error("Error al obtener actividad: ".concat(t.status," - ").concat(e))}return(await t.json()).data}catch(e){throw console.error("Error en ActividadService.getById:",e),e}}static async create(e,a){try{let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/store/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({nombre:a})});if(!s.ok){let e=await s.text();try{let a=JSON.parse(e);if(a.message){if(a.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(a.message)}}catch(e){}throw Error("Error al crear actividad: ".concat(s.status," - ").concat(e))}return(await s.json()).data}catch(e){throw console.error("Error en ActividadService.create:",e),e}}static async update(e,a){try{let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/update/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(!s.ok){let e=await s.text();try{let a=JSON.parse(e);if(a.message){if(a.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(a.message)}}catch(e){}throw Error("Error al actualizar actividad: ".concat(s.status," - ").concat(e))}return(await s.json()).data}catch(e){throw console.error("Error en ActividadService.update:",e),e}}static async toggleEstado(e){try{let a=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",t=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/destroy/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}});if(!t.ok){let e=await t.text();try{let a=JSON.parse(e);if(a.message)throw Error(a.message)}catch(e){}throw Error("Error al cambiar estado de actividad: ".concat(t.status," - ").concat(e))}return(await t.json()).data}catch(e){throw console.error("Error en ActividadService.toggleEstado:",e),e}}static async delete(e){try{let a=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",t=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}});if(!t.ok){let e=await t.text();try{let a=JSON.parse(e);if(a.message)throw Error(a.message)}catch(e){}throw Error("Error al eliminar actividad: ".concat(t.status," - ").concat(e))}return!0}catch(e){throw console.error("Error en ActividadService.delete:",e),e}}}},1446:(e,a,t)=>{Promise.resolve().then(t.bind(t,3182))},1482:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3182:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var r=t(5155),s=t(2115),o=t(5695),c=t(7550),n=t(7924),i=t(1482),l=t(4616),d=t(1228),m=t(6874),u=t.n(m),h=t(5620);function p(e){let{empresaId:a,configuracionId:t}=e,m=(0,o.useRouter)(),p=(0,o.useSearchParams)(),f=p.get("page"),x=p.get("returnTo"),[g,b]=(0,s.useState)([]),[y,w]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[j,E]=(0,s.useState)([]),[S,A]=(0,s.useState)(!0),[C,L]=(0,s.useState)(f?Number.parseInt(f):1),[_,P]=(0,s.useState)(t?Number(t):null),[I,k]=(0,s.useState)(null),[D,B]=(0,s.useState)({totalPages:1,totalItems:0,links:[]});(0,s.useEffect)(()=>{(async()=>{if(t){console.log("Usando configuracionId del par\xe1metro:",t);return}if(!a){k("No se proporcion\xf3 ID de empresa"),A(!1);return}try{console.log("Obteniendo configuraci\xf3n para empresa ID:",a);let e=await h.z.getById(Number(a));console.log("Empresa obtenida:",e),e&&e.configuracion_id?(console.log("Configuraci\xf3n ID obtenido de la empresa:",e.configuracion_id),P(e.configuracion_id)):(console.error("No se encontr\xf3 configuracion_id en la empresa:",e),console.log("Usando configuracion_id por defecto: 1"),P(1))}catch(e){console.error("Error al obtener la configuraci\xf3n de la empresa:",e),k("Error al cargar la configuraci\xf3n de la empresa")}})()},[a,t]),(0,s.useEffect)(()=>{let e=async()=>{if(!_){console.log("No hay configuracionId, no se pueden cargar actividades");return}try{A(!0),k(null);let e={page:C};v&&(e.nombre=v),g.includes("1")&&!g.includes("2")?e.estado=1:!g.includes("1")&&g.includes("2")&&(e.estado=0);let a=await d.h.getAll(_,e);E(a.data),B({totalPages:a.meta.last_page,totalItems:a.meta.total,links:a.meta.links})}catch(e){if(console.error("Error al cargar actividades:",e),e instanceof Error){if(e.message.includes("Unauthenticated")){m.push("/login");return}k(e.message||"Error al cargar las actividades. Por favor, intente nuevamente.")}else k("Error al cargar las actividades. Por favor, intente nuevamente.")}finally{A(!1)}};_?e():A(!1)},[_,v,g,C,m]);let O=e=>{b(g.includes(e)?g.filter(a=>a!==e):[...g,e]),L(1)},R=()=>{N(y),L(1)},T=()=>{b([]),w(""),N(""),L(1)},z=async e=>{if(_)try{await d.h.toggleEstado(e);let a=await d.h.getAll(_,{nombre:v||void 0,page:C,estado:q()});E(a.data),B({totalPages:a.meta.last_page,totalItems:a.meta.total,links:a.meta.links})}catch(e){console.error("Error al cambiar estado:",e),e instanceof Error?k(e.message||"Error al cambiar el estado de la actividad. Por favor, intente nuevamente."):k("Error al cambiar el estado de la actividad. Por favor, intente nuevamente.")}},U=e=>{let t=new URLSearchParams;a&&t.append("empresaId",a),_&&t.append("configuracionId",_.toString());let r=j.find(a=>a.id===e);r&&(t.append("nombre",r.nombre),t.append("estado",r.estado?"1":"0"),t.append("fecha_creacion",r.fecha_creacion||"")),m.push("/actividades/editar/".concat(e,"?").concat(t.toString()))},q=()=>g.includes("1")&&!g.includes("2")?1:!g.includes("1")&&g.includes("2")?0:void 0,K=e=>{if(e>0&&e<=D.totalPages){L(e);let t=new URLSearchParams(p.toString());t.set("page",e.toString()),a&&t.set("empresaId",a),_&&t.set("configuracionId",_.toString()),x&&t.set("returnTo",x),m.push("/actividades?".concat(t.toString()),{scroll:!1})}};return S?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-[#303e65] border-t-[#f5d433] rounded-full animate-spin mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando informaci\xf3n..."})]})}):I?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700",children:I}),(0,r.jsx)("button",{onClick:()=>m.back(),className:"mt-4 px-4 py-2 bg-[#303e65] text-white rounded-md",children:"Volver"})]})}):(0,r.jsxs)("div",{className:"p-3 sm:p-4 md:p-6 max-w-[1600px] mx-auto",children:[(0,r.jsxs)("button",{onClick:()=>{m.push("/empresas/catalogos/".concat(a))},className:"mb-4 flex items-center text-[#303e65] hover:text-[#1a2540] transition-colors",children:[(0,r.jsx)(c.A,{className:"mr-1 h-4 w-4"}),(0,r.jsx)("span",{children:"Volver"})]}),(0,r.jsxs)("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-1 sm:mb-2",children:"Actividades"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Administra las actividades con las que trabaja CIDSON."}),_&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Configuraci\xf3n ID: ",_]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-card p-3 sm:p-4 md:p-5 mb-4 sm:mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3 lg:mb-0",children:[(0,r.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-[#f5d538] mr-2",children:D.totalItems}),(0,r.jsx)("span",{className:"text-sm sm:text-base text-gray-600 font-medium",children:"REGISTROS"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 w-full lg:w-auto",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[(0,r.jsxs)("div",{className:"relative w-full sm:w-56",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar actividad...",className:"pl-9 bg-gray-50 border border-gray-200 rounded-md w-full p-2 text-sm",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),R())}}),(0,r.jsx)("button",{onClick:R,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Buscar",children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex sm:flex-wrap sm:items-center sm:gap-2",children:[(0,r.jsxs)("button",{className:"px-3 py-2 text-sm rounded-md border border-[#00b276] text-[#00b276] ".concat(g.includes("1")?"bg-green-50":""),onClick:()=>O("1"),children:["Activas"," ",g.includes("1")&&(0,r.jsx)("span",{className:"ml-1",children:"✓"})]}),(0,r.jsxs)("button",{className:"px-3 py-2 text-sm rounded-md border border-[#00b276] text-[#00b276] ".concat(g.includes("2")?"bg-green-50":""),onClick:()=>O("2"),children:["Inactivas"," ",g.includes("2")&&(0,r.jsx)("span",{className:"ml-1",children:"✓"})]}),(0,r.jsxs)("button",{className:"px-3 py-2 text-sm rounded-md border border-gray-300 flex items-center",onClick:T,disabled:0===g.length&&!y&&!v,children:[(0,r.jsx)(i.A,{className:"mr-1 h-4 w-4"})," Limpiar"]})]})]}),(0,r.jsxs)("div",{className:"flex sm:hidden flex-wrap items-center gap-2 w-full",children:[(0,r.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm rounded-md border border-[#00b276] text-[#00b276] ".concat(g.includes("1")?"bg-green-50":""),onClick:()=>O("1"),children:["Activas"," ",g.includes("1")&&(0,r.jsx)("span",{className:"ml-1",children:"✓"})]}),(0,r.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm rounded-md border border-[#00b276] text-[#00b276] ".concat(g.includes("2")?"bg-green-50":""),onClick:()=>O("2"),children:["Inactivas"," ",g.includes("2")&&(0,r.jsx)("span",{className:"ml-1",children:"✓"})]}),(0,r.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm rounded-md border border-gray-300 flex items-center justify-center",onClick:T,disabled:0===g.length&&!y&&!v,children:[(0,r.jsx)(i.A,{className:"mr-1 h-4 w-4"})," Limpiar"]})]}),(0,r.jsxs)(u(),{href:"/actividades/nueva?".concat(new URLSearchParams({...a?{empresaId:a}:{},..._?{configuracionId:_.toString()}:{},...x?{returnTo:x}:{}}).toString()),className:"px-4 py-2 text-sm rounded-md bg-[#303e65] text-white flex items-center justify-center sm:justify-start w-full sm:w-auto sm:ml-auto",children:[(0,r.jsx)(l.A,{className:"mr-1 h-4 w-4"})," Nueva Actividad"]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-[#f4f6fb]",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Nombre"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Fecha Creaci\xf3n"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Estado"}),(0,r.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Acciones"})]})}),(0,r.jsx)("tbody",{children:j.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-100",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-gray-800",children:e.nombre}),(0,r.jsx)("td",{className:"py-3 px-4 text-center text-gray-800",children:e.fecha_creacion||"N/A"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium ".concat(e.estado?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.estado?"Activa":"Inactiva"})})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>U(e.id),className:"w-10 h-10 rounded-full flex items-center justify-center border-2 border-[#2C4874] hover:bg-gray-50","aria-label":"Editar",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M8.90469 3.76136L12.2385 7.09513L4.99932 14.3343L2.02701 14.6624C1.6291 14.7064 1.29291 14.3699 1.33718 13.972L1.6679 10.9976L8.90469 3.76136ZM14.3004 3.26502L12.7351 1.6997C12.2468 1.21143 11.4549 1.21143 10.9666 1.6997L9.494 3.17232L12.8278 6.50608L14.3004 5.03346C14.7887 4.54494 14.7887 3.75329 14.3004 3.26502Z",fill:"#2C4874"})})}),(0,r.jsx)("button",{onClick:()=>z(e.id),className:"w-10 h-10 rounded-full flex items-center justify-center border-2 border-[#2C4874] hover:bg-gray-50","aria-label":e.estado?"Desactivar":"Activar",children:e.estado?(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M10.5272 7.99992L14.3177 4.20939C14.7829 3.74424 14.7829 2.99007 14.3177 2.52454L13.4753 1.68212C13.0101 1.21696 12.256 1.21696 11.7904 1.68212L7.99992 5.47265L4.20939 1.68212C3.74424 1.21696 2.99007 1.21696 2.52454 1.68212L1.68212 2.52454C1.21696 2.98969 1.21696 3.74386 1.68212 4.20939L5.47265 7.99992L1.68212 11.7904C1.21696 12.2556 1.21696 13.0098 1.68212 13.4753L2.52454 14.3177C2.98969 14.7829 3.74424 14.7829 4.20939 14.3177L7.99992 10.5272L11.7904 14.3177C12.2556 14.7829 13.0101 14.7829 13.4753 14.3177L14.3177 13.4753C14.7829 13.0101 14.7829 12.256 14.3177 11.7904L10.5272 7.99992Z",fill:"#2C4874"})}):(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M5.86184 12.7761L1.52851 8.44278C1.26817 8.18244 1.26817 7.76033 1.52851 7.49997L2.47129 6.55715C2.73163 6.29679 3.15377 6.29679 3.41411 6.55715L6.33325 9.47627L12.5857 3.22382C12.8461 2.96348 13.2682 2.96348 13.5285 3.22382L14.4713 4.16663C14.7317 4.42697 14.7317 4.84908 14.4713 5.10945L6.80466 12.7761C6.54429 13.0365 6.12218 13.0365 5.86184 12.7761Z",fill:"#2C4874"})})})]})})]},e.id))})]})}),0===j.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"No se encontraron actividades con los filtros aplicados"}),(0,r.jsx)("button",{className:"mt-4 px-4 py-2 rounded-md border border-gray-300",onClick:T,children:"Limpiar filtros"})]}),j.length>0&&D.totalPages>0&&(0,r.jsx)("div",{className:"flex justify-center py-4 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>K(1),disabled:1===C,className:"px-3 py-1 text-gray-500 text-sm disabled:opacity-50",children:"\xab Primera"}),(0,r.jsx)("button",{onClick:()=>K(C-1),disabled:1===C,className:"px-3 py-1 text-gray-500 text-sm disabled:opacity-50",children:"‹ Anterior"}),D.links.filter(e=>!e.label.includes("Previous")&&!e.label.includes("Next")).map((e,a)=>(0,r.jsx)("button",{onClick:()=>{if(e.url){let a=new URL(e.url).searchParams.get("page");a&&K(Number.parseInt(a))}},className:"px-3 py-1 text-sm rounded-md ".concat(e.active?"bg-[#303e65] text-white":"text-gray-500"),disabled:!e.url,children:e.label},a)),(0,r.jsx)("button",{onClick:()=>K(C+1),disabled:C===D.totalPages,className:"px-3 py-1 text-gray-500 text-sm disabled:opacity-50",children:"Siguiente ›"}),(0,r.jsx)("button",{onClick:()=>K(D.totalPages),disabled:C===D.totalPages,className:"px-3 py-1 text-gray-500 text-sm disabled:opacity-50",children:"\xdaltima \xbb"})]})})]})]})}var f=t(924);function x(){let e=(0,o.useRouter)(),a=(0,o.useSearchParams)(),t=a.get("empresaId"),c=a.get("configuracionId"),[n,i]=(0,s.useState)(!0),[l,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{try{if(console.log("Verificando par\xe1metros:",{empresaId:t,configuracionId:c}),!t){console.error("Falta empresaId"),d("Falta el ID de la empresa"),e.push("/empresas");return}if(!c){console.error("Falta configuracionId"),d("Falta el ID de configuraci\xf3n"),e.push("/empresas");return}if(isNaN(Number(t))||isNaN(Number(c))){console.error("IDs inv\xe1lidos:",{empresaId:t,configuracionId:c}),d("IDs inv\xe1lidos"),e.push("/empresas");return}if(!(0,f.c4)()){console.error("No hay token de autenticaci\xf3n"),e.push("/login");return}console.log("Verificaci\xf3n exitosa, procediendo a cargar el m\xf3dulo"),i(!1),d(null)}catch(a){console.error("Error en la verificaci\xf3n:",a),d("Error en la verificaci\xf3n"),e.push("/login")}})()},[e,t,c]),n)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-[#303e65] border-t-[#f5d433] rounded-full animate-spin mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando informaci\xf3n..."})]})}):l?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700",children:l}),(0,r.jsx)("button",{onClick:()=>e.back(),className:"mt-4 px-4 py-2 bg-[#303e65] text-white rounded-md",children:"Volver"})]})}):(0,r.jsx)(p,{empresaId:t||void 0,configuracionId:c||void 0})}},4616:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5620:(e,a,t)=>{"use strict";t.d(a,{z:()=>s});var r=t(924);class s{static async getAll(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS);if(e){let t=new URLSearchParams;e.nombre&&t.append("nombre",e.nombre),void 0!==e.estado&&t.append("estado",e.estado.toString()),e.fecha_inicio&&t.append("fecha_inicio",e.fecha_inicio),e.fecha_fin&&t.append("fecha_fin",e.fecha_fin),e.page&&t.append("page",e.page.toString());let r=t.toString();r&&(a+="?".concat(r))}let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Error al obtener empresas: ".concat(s.statusText));let o=await s.json();return console.log("Respuesta de la API (getAll):",o),{empresas:o.data.map(e=>({id:e.id,nombre:e.nombre,razonSocial:e.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:e.fecha_creacion,estado:e.estado?"Activo":"Inactivo",configuracion_id:e.configuracion_id})),pagination:o.meta}}catch(e){return console.error("Error al obtener empresas:",e),{empresas:[],pagination:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}}}}static async create(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s={nombre:e.nombre,razon_social:e.razon_social},o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(s)});if(!o.ok){let e=await o.json();throw Error(e.message||"Error al crear empresa: ".concat(o.statusText))}let c=await o.json();return console.log("Respuesta de la API (create):",c),{id:c.data.id,nombre:c.data.nombre,razonSocial:c.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:c.data.fecha_creacion,estado:c.data.estado?"Activo":"Inactivo",configuracion_id:c.data.configuracion_id}}catch(e){throw console.error("Error al crear empresa:",e),e}}static async getById(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!s.ok){if(404===s.status)return;throw Error("Error al obtener empresa: ".concat(s.statusText))}let o=await s.json();return console.log("Respuesta de la API (getById):",o),{id:o.data.id,nombre:o.data.nombre,razonSocial:o.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:o.data.fecha_creacion,estado:o.data.estado?"Activo":"Inactivo",configuracion_id:o.data.configuracion_id}}catch(e){console.error("Error al obtener empresa por ID:",e);return}}static async update(e,a){try{let t="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),s=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o={nombre:a.nombre,razon_social:a.razon_social},c=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)});if(!c.ok){if(404===c.status)return;let e=await c.json();if(422===c.status&&e.errors){let a=Error(e.message||"Error de validaci\xf3n");throw a.validationErrors=e.errors,a}throw Error(e.message||"Error al actualizar empresa: ".concat(c.statusText))}let n=await c.json();return console.log("Respuesta de la API (update):",n),{id:n.data.id,nombre:n.data.nombre,razonSocial:n.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:n.data.fecha_creacion,estado:n.data.estado?"Activo":"Inactivo",configuracion_id:n.data.configuracion_id}}catch(e){throw console.error("Error al actualizar empresa:",e),e}}static async toggleActive(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch(a,{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!s.ok){if(404===s.status)return;throw Error("Error al cambiar estado de empresa: ".concat(s.statusText))}let o=await s.json();return console.log("Respuesta de la API (toggleActive):",o),{id:o.data.id,nombre:o.data.nombre,razonSocial:o.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:o.data.fecha_creacion,estado:o.data.estado?"Activo":"Inactivo",configuracion_id:o.data.configuracion_id}}catch(e){throw console.error("Error al cambiar estado de empresa:",e),e}}}},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},7550:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7924:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9946:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:a,...c,width:s,height:s,stroke:t,strokeWidth:i?24*Number(n)/Number(s):n,className:o("lucide",l),...u},[...m.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),i=(e,a)=>{let t=(0,r.forwardRef)((t,c)=>{let{className:i,...l}=t;return(0,r.createElement)(n,{ref:c,iconNode:a,className:o("lucide-".concat(s(e)),i),...l})});return t.displayName="".concat(e),t}}},e=>{var a=a=>e(e.s=a);e.O(0,[6874,8441,1684,7358],()=>a(1446)),_N_E=e.O()}]);