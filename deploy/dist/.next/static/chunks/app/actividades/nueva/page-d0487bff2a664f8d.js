(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{924:(e,t,a)=>{"use strict";a.d(t,{c4:()=>i,e9:()=>c,nC:()=>s});var r=a(9509);let o=()=>"https://cidson.api.production.com",c=()=>o().replace(/\/$/,"");function i(){{let e=localStorage.getItem("auth_token");if(e)return e;let t=sessionStorage.getItem("auth_token");if(t)return t}return null}let s={BASE_URL:r.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},1228:(e,t,a)=>{"use strict";a.d(t,{h:()=>o});var r=a(924);class o{static async getAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat(r.nC.BASE_URL,"/api/actividades/").concat(e),o=new URLSearchParams;t.nombre&&o.append("nombre",t.nombre),void 0!==t.estado&&o.append("estado",t.estado.toString()),t.page&&o.append("page",t.page.toString());let c=o.toString();c&&(a+="?".concat(c));let i=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",s=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(i)}});if(!s.ok){let e=await s.text();try{let t=JSON.parse(e);if(t.message)throw Error(t.message)}catch(e){}throw Error("Error al obtener actividades: ".concat(s.status," - ").concat(e))}return await s.json()}catch(e){throw console.error("Error en ActividadService.getAll:",e),e}}static async getById(e,t){try{let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/detalle/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.text();try{let t=JSON.parse(e);if(t.message)throw Error(t.message)}catch(e){}throw Error("Error al obtener actividad: ".concat(a.status," - ").concat(e))}return(await a.json()).data}catch(e){throw console.error("Error en ActividadService.getById:",e),e}}static async create(e,t){try{let a=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/store/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({nombre:t})});if(!o.ok){let e=await o.text();try{let t=JSON.parse(e);if(t.message){if(t.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(t.message)}}catch(e){}throw Error("Error al crear actividad: ".concat(o.status," - ").concat(e))}return(await o.json()).data}catch(e){throw console.error("Error en ActividadService.create:",e),e}}static async update(e,t){try{let a=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/update/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});if(!o.ok){let e=await o.text();try{let t=JSON.parse(e);if(t.message){if(t.message.includes("already exists"))throw Error("NOMBRE_DUPLICADO");throw Error(t.message)}}catch(e){}throw Error("Error al actualizar actividad: ".concat(o.status," - ").concat(e))}return(await o.json()).data}catch(e){throw console.error("Error en ActividadService.update:",e),e}}static async toggleEstado(e){try{let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/destroy/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.text();try{let t=JSON.parse(e);if(t.message)throw Error(t.message)}catch(e){}throw Error("Error al cambiar estado de actividad: ".concat(a.status," - ").concat(e))}return(await a.json()).data}catch(e){throw console.error("Error en ActividadService.toggleEstado:",e),e}}static async delete(e){try{let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",a=await fetch("".concat(r.nC.BASE_URL,"/api/actividades/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.text();try{let t=JSON.parse(e);if(t.message)throw Error(t.message)}catch(e){}throw Error("Error al eliminar actividad: ".concat(a.status," - ").concat(e))}return!0}catch(e){throw console.error("Error en ActividadService.delete:",e),e}}}},4229:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},5770:(e,t,a)=>{Promise.resolve().then(a.bind(a,7107))},7107:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(5155),o=a(2115),c=a(5695),i=a(7550),s=a(4229),n=a(1228);function d(){let e=(0,c.useRouter)(),t=(0,c.useSearchParams)(),a=t.get("empresaId"),d=t.get("configuracionId"),l=t.get("returnTo"),[u,m]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[f,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)(d?Number(d):null);(0,o.useEffect)(()=>{d||a||p("No se proporcion\xf3 ID de empresa o configuraci\xf3n")},[d,a]);let E=async t=>{if(t.preventDefault(),!u.trim()){p("El nombre de la actividad es requerido");return}if(!g){p("No se proporcion\xf3 ID de configuraci\xf3n");return}v(!0),p("");try{if(await n.h.create(g,u.trim())){let t=new URLSearchParams;a&&t.append("empresaId",a),g&&t.append("configuracionId",g.toString()),l&&t.append("returnTo",l),e.push("/actividades?".concat(t.toString()))}}catch(e){console.error("Error al crear actividad:",e),e instanceof Error?"NOMBRE_DUPLICADO"===e.message?p("El nombre de la actividad ya existe. Por favor, utilice otro nombre."):p(e.message||"Error al crear la actividad. Por favor, intente nuevamente."):p("Error al crear la actividad. Por favor, intente nuevamente.")}finally{v(!1)}};return(0,r.jsxs)("div",{className:"p-3 sm:p-4 md:p-6 max-w-[1600px] mx-auto",children:[(0,r.jsxs)("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[(0,r.jsxs)("a",{href:(()=>{let e=new URLSearchParams;return a&&e.append("empresaId",a),g&&e.append("configuracionId",g.toString()),l&&e.append("returnTo",l),"/actividades".concat(e.toString()?"?".concat(e.toString()):"")})(),className:"inline-flex items-center text-[#303e65] hover:text-[#1a2540] transition-colors",children:[(0,r.jsx)(i.A,{className:"mr-1 h-4 w-4"}),(0,r.jsx)("span",{children:"Regresar"})]}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mt-4",children:"Nueva Actividad"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Crea una nueva actividad para CIDSON."})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,r.jsxs)("form",{onSubmit:E,children:[(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre De La Actividad",value:u,onChange:e=>{m(e.target.value),e.target.value.trim()&&p("")},className:"w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ".concat(h?"ring-2 ring-red-500":"")}),h&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h})]})}),(0,r.jsx)("div",{className:"flex justify-end mt-8",children:(0,r.jsx)("button",{type:"submit",disabled:f,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})})]})})]})}},7550:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(2115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:d="",children:l,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:o,height:o,stroke:a,strokeWidth:n?24*Number(s)/Number(o):s,className:c("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(l)?l:[l]])}),n=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:n,...d}=a;return(0,r.createElement)(s,{ref:i,iconNode:t,className:c("lucide-".concat(o(e)),n),...d})});return a.displayName="".concat(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(5770)),_N_E=e.O()}]);