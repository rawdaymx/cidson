(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4533],{561:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var r=t(5155),o=t(2115),n=t(5695),s=t(7550),c=t(6874),i=t.n(c),l=t(5620),d=t(9946);let m=(0,d.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=(0,d.A)("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),u=(0,d.A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),p=(0,d.A)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);var f=t(7108);function g(e){let{catalogo:a,empresaId:t,configuracionId:o}=e;return(0,r.jsx)(i(),{href:(()=>{let e=new URLSearchParams;e.append("empresaId",t.toString());let r=o||1;return e.append("configuracionId",r.toString()),"".concat(a.ruta,"?").concat(e.toString())})(),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-100 p-5 transition-all duration-200 hover:shadow-card-hover hover:border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-[#303e65] bg-opacity-10 flex items-center justify-center text-[#303e65]",children:(()=>{switch(a.icono){case"FileText":default:return(0,r.jsx)(m,{className:"h-6 w-6"});case"Hand":return(0,r.jsx)(h,{className:"h-6 w-6"});case"Server":return(0,r.jsx)(u,{className:"h-6 w-6"});case"Bed":return(0,r.jsx)(p,{className:"h-6 w-6"});case"Package":return(0,r.jsx)(f.A,{className:"h-6 w-6"})}})()}),(0,r.jsx)("h3",{className:"ml-4 font-semibold text-lg text-gray-800",children:a.nombre})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:a.descripcion}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Configuraci\xf3n ID:"," ",o||"No disponible (usando valor por defecto: 1)"]})]})})}function x(){let e=(0,n.useRouter)(),a=Number((0,n.useParams)().id),[t,c]=(0,o.useState)(null),[d,m]=(0,o.useState)(!0),[h,u]=(0,o.useState)(null);if((0,o.useEffect)(()=>{let e=async()=>{try{if(m(!0),u(null),isNaN(a)){u("ID de empresa inv\xe1lido"),m(!1);return}let e=await l.z.getById(a);e?(console.log("Empresa obtenida:",e),console.log("Configuraci\xf3n ID:",e.configuracion_id),c(e)):u("Empresa no encontrada")}catch(e){console.error("Error al cargar la empresa:",e),u("Error al cargar los datos de la empresa. Por favor, intente nuevamente.")}finally{m(!1)}};a&&e()},[a,e]),d)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-[#303e65] border-t-[#f5d433] rounded-full animate-spin mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando informaci\xf3n..."})]})});if(h)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700",children:h}),(0,r.jsx)(i(),{href:"/empresas",className:"mt-4 inline-block text-[#303e65] hover:underline",children:"Volver al listado"})]})});if(!t)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#f4f6fb]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700",children:"Empresa no encontrada"}),(0,r.jsx)(i(),{href:"/empresas",className:"mt-4 inline-block text-[#303e65] hover:underline",children:"Volver al listado"})]})});let p=!t.configuracion_id;return(0,r.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,r.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,r.jsxs)(i(),{href:"/empresas",className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,r.jsx)(s.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Cat\xe1logos de ",t.nombre]}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Seleccione un cat\xe1logo para gestionar."}),p?(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"No se encontr\xf3 ID de configuraci\xf3n para esta empresa. Se utilizar\xe1 un valor por defecto (1) para pruebas."})})]})}):(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-8",children:["ID de Configuraci\xf3n: ",t.configuracion_id]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,nombre:"Actividades",descripcion:"Gesti\xf3n de actividades asociadas a la empresa",icono:"FileText",ruta:"/actividades"},{id:2,nombre:"Motivos",descripcion:"Gesti\xf3n de motivos asociados a la empresa",icono:"FileText",ruta:"/motivos"},{id:3,nombre:"M\xe9todos",descripcion:"Gesti\xf3n de m\xe9todos asociados a la empresa",icono:"Hand",ruta:"/metodos"},{id:4,nombre:"\xc1reas",descripcion:"Gesti\xf3n de \xe1reas asociadas a la empresa",icono:"Server",ruta:"/areas"},{id:5,nombre:"Zonas",descripcion:"Gesti\xf3n de zonas asociadas a la empresa",icono:"Bed",ruta:"/zonas"},{id:6,nombre:"Materiales",descripcion:"Gesti\xf3n de materiales asociados a la empresa",icono:"Package",ruta:"/materiales"}].map(e=>(0,r.jsx)(g,{catalogo:e,empresaId:a,configuracionId:t.configuracion_id},e.id))})]})})}},924:(e,a,t)=>{"use strict";t.d(a,{c4:()=>s,e9:()=>n,nC:()=>c});var r=t(9509);let o=()=>"https://cidson.api.production.com",n=()=>o().replace(/\/$/,"");function s(){{let e=localStorage.getItem("auth_token");if(e)return e;let a=sessionStorage.getItem("auth_token");if(a)return a}return null}let c={BASE_URL:r.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},3789:(e,a,t)=>{Promise.resolve().then(t.bind(t,561))},5620:(e,a,t)=>{"use strict";t.d(a,{z:()=>o});var r=t(924);class o{static async getAll(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS);if(e){let t=new URLSearchParams;e.nombre&&t.append("nombre",e.nombre),void 0!==e.estado&&t.append("estado",e.estado.toString()),e.fecha_inicio&&t.append("fecha_inicio",e.fecha_inicio),e.fecha_fin&&t.append("fecha_fin",e.fecha_fin),e.page&&t.append("page",e.page.toString());let r=t.toString();r&&(a+="?".concat(r))}let t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!o.ok)throw Error("Error al obtener empresas: ".concat(o.statusText));let n=await o.json();return console.log("Respuesta de la API (getAll):",n),{empresas:n.data.map(e=>({id:e.id,nombre:e.nombre,razonSocial:e.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:e.fecha_creacion,estado:e.estado?"Activo":"Inactivo",configuracion_id:e.configuracion_id})),pagination:n.meta}}catch(e){return console.error("Error al obtener empresas:",e),{empresas:[],pagination:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}}}}static async create(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o={nombre:e.nombre,razon_social:e.razon_social},n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(o)});if(!n.ok){let e=await n.json();throw Error(e.message||"Error al crear empresa: ".concat(n.statusText))}let s=await n.json();return console.log("Respuesta de la API (create):",s),{id:s.data.id,nombre:s.data.nombre,razonSocial:s.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:s.data.fecha_creacion,estado:s.data.estado?"Activo":"Inactivo",configuracion_id:s.data.configuracion_id}}catch(e){throw console.error("Error al crear empresa:",e),e}}static async getById(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!o.ok){if(404===o.status)return;throw Error("Error al obtener empresa: ".concat(o.statusText))}let n=await o.json();return console.log("Respuesta de la API (getById):",n),{id:n.data.id,nombre:n.data.nombre,razonSocial:n.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:n.data.fecha_creacion,estado:n.data.estado?"Activo":"Inactivo",configuracion_id:n.data.configuracion_id}}catch(e){console.error("Error al obtener empresa por ID:",e);return}}static async update(e,a){try{let t="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),o=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",n={nombre:a.nombre,razon_social:a.razon_social},s=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)});if(!s.ok){if(404===s.status)return;let e=await s.json();if(422===s.status&&e.errors){let a=Error(e.message||"Error de validaci\xf3n");throw a.validationErrors=e.errors,a}throw Error(e.message||"Error al actualizar empresa: ".concat(s.statusText))}let c=await s.json();return console.log("Respuesta de la API (update):",c),{id:c.data.id,nombre:c.data.nombre,razonSocial:c.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:c.data.fecha_creacion,estado:c.data.estado?"Activo":"Inactivo",configuracion_id:c.data.configuracion_id}}catch(e){throw console.error("Error al actualizar empresa:",e),e}}static async toggleActive(e){try{let a="".concat(r.nC.BASE_URL).concat(r.nC.ENDPOINTS.EMPRESAS,"/").concat(e),t=(0,r.c4)()||"yBPONqL0SH66XBKyfXu2ouwayDl7qaCn05ODKAioebfbd8ad",o=await fetch(a,{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!o.ok){if(404===o.status)return;throw Error("Error al cambiar estado de empresa: ".concat(o.statusText))}let n=await o.json();return console.log("Respuesta de la API (toggleActive):",n),{id:n.data.id,nombre:n.data.nombre,razonSocial:n.data.razon_social,fechaRegistro:new Date().toLocaleDateString(),fecha_creacion:n.data.fecha_creacion,estado:n.data.estado?"Activo":"Inactivo",configuracion_id:n.data.configuracion_id}}catch(e){throw console.error("Error al cambiar estado de empresa:",e),e}}}},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},7108:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7550:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9946:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(2115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:m,...h}=e;return(0,r.createElement)("svg",{ref:a,...s,width:o,height:o,stroke:t,strokeWidth:i?24*Number(c)/Number(o):c,className:n("lucide",l),...h},[...m.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),i=(e,a)=>{let t=(0,r.forwardRef)((t,s)=>{let{className:i,...l}=t;return(0,r.createElement)(c,{ref:s,iconNode:a,className:n("lucide-".concat(o(e)),i),...l})});return t.displayName="".concat(e),t}}},e=>{var a=a=>e(e.s=a);e.O(0,[6874,8441,1684,7358],()=>a(3789)),_N_E=e.O()}]);