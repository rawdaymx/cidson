(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9081],{381:(e,a,r)=>{Promise.resolve().then(r.bind(r,7758))},4229:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},7758:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var t=r(5155),s=r(2115),n=r(5695),l=r(7550);let o=(0,r(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var c=r(4229),i=r(6874),d=r.n(i),m=r(4888);function u(){let e=(0,n.useRouter)(),a=(0,n.useSearchParams)().get("empresaId"),[r,i]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),b=async t=>{if(t.preventDefault(),!r.trim()){x("El nombre del \xe1rea es requerido");return}try{if(p(!0),a)try{await m.x.create({nombre:r.trim(),configuracion_id:Number(a)}),e.push("/areas?empresaId=".concat(a))}catch(e){console.error("Error espec\xedfico de API:",e),e&&("string"==typeof e&&(e.includes("already been taken")||e.includes("ya existe"))||"object"==typeof e&&e.message&&(e.message.includes("already been taken")||e.message.includes("ya existe")))?x("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre."):x("No se pudo conectar con el servidor. Verifique su conexi\xf3n e intente nuevamente.")}else{let a=new Date,t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),n=a.getFullYear(),l="".concat(t,"/").concat(s,"/").concat(n);await m.x.create({nombre:r.trim(),estado:"Activa",fechaCreacion:l}),e.push("/areas")}}catch(e){console.error("Error general al crear \xe1rea:",e),x("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre.")}finally{p(!1)}},f=async()=>{try{p(!0);let t=new Date,s=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();"".concat(s,"/").concat(n,"/").concat(l),await m.x.create({nombre:r.trim(),configuracion_id:a?Number(a):0}),a?e.push("/areas?empresaId=".concat(a)):e.push("/areas")}catch(e){console.error("Error en modo fallback:",e),x("El nombre del \xe1rea ya existe. Por favor, utilice otro nombre.")}finally{p(!1)}};return(0,t.jsx)("div",{className:"bg-[#f4f6fb] min-h-screen",children:(0,t.jsxs)("div",{className:"pl-8 pr-6 py-6 max-w-[1200px]",children:[(0,t.jsxs)(d(),{href:a?"/areas?empresaId=".concat(a):"/areas",className:"inline-flex items-center text-[#303e65] mb-6",children:[(0,t.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Regresar"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Nuevo registro"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Crea y registra nuevas \xe1reas."}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-8 shadow-sm max-w-[800px] mx-auto",children:(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Nombre del \xc1rea",value:r,onChange:e=>{i(e.target.value),e.target.value.trim()&&x("")},className:"w-full h-12 px-4 bg-[#f4f6fb] rounded-md border-0 focus:ring-2 focus:ring-[#303e65] ".concat(u?"ring-2 ring-red-500":""),disabled:h}),u&&(0,t.jsxs)("div",{className:"mt-2 flex items-start text-sm text-red-500",children:[(0,t.jsx)(o,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),(0,t.jsx)("p",{children:u})]})]})}),(0,t.jsx)("div",{className:"flex justify-end mt-8",children:(0,t.jsx)("button",{type:"submit",disabled:h,className:"flex items-center justify-center bg-[#f5d433] text-[#303e65] font-medium px-6 py-2.5 rounded-full hover:bg-[#f0ca20] transition-colors disabled:opacity-70",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-[#303e65] border-t-transparent rounded-full animate-spin mr-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.A,{className:"h-5 w-5 mr-2"}),"Guardar"]})})}),u&&u.includes("No se pudo conectar")&&(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("button",{type:"button",onClick:f,className:"text-sm text-blue-600 hover:underline",children:"Continuar en modo local (solo para desarrollo)"})})]})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6874,938,8441,1684,7358],()=>a(381)),_N_E=e.O()}]);