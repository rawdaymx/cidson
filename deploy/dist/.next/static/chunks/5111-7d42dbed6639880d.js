"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5111],{924:(t,e,a)=>{a.d(e,{c4:()=>s,e9:()=>n,nC:()=>c});var r=a(9509);let o=()=>"https://cidson.api.production.com",n=()=>o().replace(/\/$/,"");function s(){{let t=localStorage.getItem("auth_token");if(t)return t;let e=sessionStorage.getItem("auth_token");if(e)return e}return null}let c={BASE_URL:r.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev",ENDPOINTS:{LOGIN:"/api/login",EMPRESAS:"/api/empresas",ACTIVIDADES:"/api/actividades",ZONAS:"/api/zonas",AREAS:"/api/areas",METODOS:"/api/metodos",MATERIALES:"/api/materiales",MOTIVOS:"/api/motivos",CHECKLISTS:"/api/checklists"}}},1061:(t,e,a)=>{a.d(e,{E:()=>n});var r=a(5305),o=a(924);class n{static async getAll(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;try{if(!t)return this.getEmptyPaginationResponse();let s={page:e};a&&(s.nombre=a),void 0!==n&&(s.estado=n);let c="".concat(o.nC.BASE_URL,"/api/motivos/").concat(t);console.log("URL de la solicitud:",c),console.log("Par\xe1metros:",s);try{let t=await r.Q.get(c,s);return this.processMotivosResponse(t)}catch(a){console.error("Error al hacer la solicitud HTTP:",a),console.log("Intentando con URL alternativa...");let e="".concat(o.nC.BASE_URL,"/motivos/").concat(t);console.log("URL alternativa:",e);try{let t=await r.Q.get(e,s);return this.processMotivosResponse(t)}catch(t){return console.error("Error con URL alternativa:",t),this.getEmptyPaginationResponse()}}}catch(t){return console.error("Error al obtener motivos:",t),this.getEmptyPaginationResponse()}}static getEmptyPaginationResponse(){return{data:[],meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0},links:{first:"",last:"",prev:null,next:null}}}static processMotivosResponse(t){if(t&&t.data){let e=Array.isArray(t.data)?t.data.map(t=>({id:t.id,nombre:t.nombre,estado:t.estado,fecha_creacion:t.fecha_creacion,configuracion_id:t.configuracion_id,area_id:t.area_id})):[];return{data:e,meta:t.meta||{current_page:1,from:0,last_page:1,links:[],path:"",per_page:e.length,to:e.length,total:e.length},links:t.links||{first:"",last:"",prev:null,next:null}}}return this.getEmptyPaginationResponse()}static async getById(t){try{let e="".concat(o.nC.BASE_URL,"/api/motivo/").concat(t);console.log("URL para obtener motivo por ID:",e);try{let t=await r.Q.get(e);return this.transformMotivoResponse(t.data)}catch(n){console.error("Error al hacer la solicitud HTTP:",n);let e="".concat(o.nC.BASE_URL,"/motivo/").concat(t);console.log("URL alternativa:",e);let a=await r.Q.get(e);return this.transformMotivoResponse(a.data)}}catch(e){console.error("Error al obtener motivo con ID ".concat(t,":"),e);return}}static transformMotivoResponse(t){return{id:t.id,nombre:t.nombre,estado:t.estado,fecha_creacion:t.fecha_creacion,configuracion_id:t.configuracion_id,area_id:t.area_id}}static async create(t){try{let e="".concat(o.nC.BASE_URL,"/api/motivos/store/").concat(t.configuracion_id);console.log("URL para crear motivo:",e);let a={nombre:t.nombre};t.area_id&&(a.area_id=t.area_id);try{let t=await r.Q.post(e,a);return this.transformMotivoResponse(t.data)}catch(s){console.error("Error al hacer la solicitud HTTP:",s);let e="".concat(o.nC.BASE_URL,"/motivos/store/").concat(t.configuracion_id);console.log("URL alternativa:",e);let n=await r.Q.post(e,a);return this.transformMotivoResponse(n.data)}}catch(t){throw console.error("Error al crear motivo:",t),t}}static async update(t,e){try{let a="".concat(o.nC.BASE_URL,"/api/motivos/update/").concat(t);console.log("URL para actualizar motivo:",a);let n={};void 0!==e.nombre&&(n.nombre=e.nombre),void 0!==e.estado&&(n.estado="Activa"===e.estado),void 0!==e.configuracion_id&&(n.configuracion_id=e.configuracion_id),void 0!==e.area_id&&(n.area_id=e.area_id);try{let t=await r.Q.put(a,n);return this.transformMotivoResponse(t.data)}catch(s){console.error("Error al hacer la solicitud HTTP:",s);let e="".concat(o.nC.BASE_URL,"/motivos/update/").concat(t);console.log("URL alternativa:",e);let a=await r.Q.put(e,n);return this.transformMotivoResponse(a.data)}}catch(e){console.error("Error al actualizar motivo con ID ".concat(t,":"),e);return}}static async toggleEstado(t){try{let e="".concat(o.nC.BASE_URL,"/api/motivos/destroy/").concat(t);console.log("URL para cambiar estado del motivo:",e);try{let t=await r.Q.delete(e);return{id:t.data.id,nombre:t.data.nombre,estado:t.data.estado,fecha_creacion:t.data.fecha_creacion,configuracion_id:t.data.configuracion_id,area_id:t.data.area_id}}catch(n){console.error("Error al hacer la solicitud HTTP:",n);let e="".concat(o.nC.BASE_URL,"/motivos/destroy/").concat(t);console.log("URL alternativa:",e);let a=await r.Q.delete(e);return{id:a.data.id,nombre:a.data.nombre,estado:a.data.estado,fecha_creacion:a.data.fecha_creacion,configuracion_id:a.data.configuracion_id,area_id:a.data.area_id}}}catch(e){console.error("Error al cambiar estado del motivo con ID ".concat(t,":"),e);return}}static async delete(t){try{let e="".concat(o.nC.BASE_URL,"/api/motivo/").concat(t);console.log("URL para eliminar motivo:",e);try{return await r.Q.delete(e),!0}catch(a){console.error("Error al hacer la solicitud HTTP:",a);let e="".concat(o.nC.BASE_URL,"/motivo/").concat(t);return console.log("URL alternativa:",e),await r.Q.delete(e),!0}}catch(e){return console.error("Error al eliminar motivo con ID ".concat(t,":"),e),!1}}}},5305:(t,e,a)=>{a.d(e,{Q:()=>n});var r=a(924),o=a(9509);class n{static getHeaders(){let t={"Content-Type":"application/json",Accept:"application/json"},e=(0,r.c4)();return e&&(t.Authorization="Bearer ".concat(e)),console.log("Headers de la petici\xf3n:",t),t}static async handleResponse(t){let e;if(!t.ok){let e;let a=t.headers.get("content-type")||"";try{e=await t.text()}catch(e){throw Error("Error HTTP: ".concat(t.status,", ").concat(t.statusText))}if(a.includes("text/html"))throw console.error("Respuesta HTML recibida:",e.substring(0,200)+"..."),Error("El servidor devolvi\xf3 HTML en lugar de JSON. C\xf3digo: ".concat(t.status));try{let a=JSON.parse(e),r=a.message||a.error||"Error HTTP: ".concat(t.status);throw Error(r)}catch(a){throw Error("Error HTTP: ".concat(t.status,", ").concat(e||t.statusText))}}if("0"===t.headers.get("content-length"))return{};let a=t.headers.get("content-type")||"";try{e=await t.text()}catch(t){throw Error("Error al leer la respuesta del servidor")}if(!a.includes("application/json")){if(console.warn("Respuesta no es JSON: ".concat(a)),e.trim().startsWith("<!DOCTYPE")||e.trim().startsWith("<html"))throw console.error("Respuesta HTML recibida:",e.substring(0,200)+"..."),Error("El servidor devolvi\xf3 HTML en lugar de JSON");try{return JSON.parse(e)}catch(t){throw console.error("No se pudo parsear la respuesta como JSON:",e.substring(0,200)+"..."),Error("Respuesta no v\xe1lida: no es JSON")}}try{return JSON.parse(e)}catch(t){throw console.error("Error al parsear JSON:",t),console.error("Contenido de la respuesta:",e.substring(0,200)+"..."),Error("Error al parsear la respuesta JSON")}}static async get(t){try{let e=this.ensureAbsoluteUrl(t);console.log("GET Request URL:",e);let a=this.getHeaders();console.log("GET Request Headers:",a);let r=await fetch(e,{method:"GET",headers:a});return await this.handleResponse(r)}catch(t){throw console.error("GET Request Error:",t),t}}static async post(t,e){try{let a=this.ensureAbsoluteUrl(t);console.log("POST:",a),console.log("Datos:",e);let r=await fetch(a,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return await this.handleResponse(r)}catch(e){throw console.error("Error en solicitud POST a ".concat(t,":"),e),e}}static async put(t,e){try{let a=this.ensureAbsoluteUrl(t);console.log("PUT:",a),console.log("Datos:",e);let r=await fetch(a,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(e)});return await this.handleResponse(r)}catch(e){throw console.error("Error en solicitud PUT a ".concat(t,":"),e),e}}static async delete(t){try{let e=this.ensureAbsoluteUrl(t);console.log("DELETE:",e);let a=await fetch(e,{method:"DELETE",headers:this.getHeaders()});return await this.handleResponse(a)}catch(e){throw console.error("Error en solicitud DELETE a ".concat(t,":"),e),e}}static ensureAbsoluteUrl(t){try{return new URL(t),t}catch(r){let e=(o.env.NEXT_PUBLIC_API_URL||"https://cidson.int.qaenv.dev").replace(/\/+$/,""),a=t.replace(/^\/+/,"");return"".concat(e,"/").concat(a)}}static async handleError(t){try{let e=await t.json();if(e.message)return Error(e.message);return Error("Error HTTP: ".concat(t.status))}catch(e){return Error("Error HTTP: ".concat(t.status))}}}},5695:(t,e,a)=>{var r=a(8999);a.o(r,"useParams")&&a.d(e,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(e,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(e,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(e,{useSearchParams:function(){return r.useSearchParams}})}}]);